(()=>{var e,t,n,o,r={4485:(e,t,n)=>{"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{$r:()=>p,Do:()=>l,Vp:()=>d,xs:()=>s}),i=function(e){var t=function(e){var t,n=Object.prototype,o=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function c(e,t,n,o){var r=t&&t.prototype instanceof m?t:m,i=Object.create(r.prototype),a=new x(o||[]);return i._invoke=function(e,t,n){var o=d;return function(r,i){if(o===f)throw new Error("Generator is already running");if(o===g){if("throw"===r)throw i;return Z()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var s=S(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=f;var u=l(e,t,n);if("normal"===u.type){if(o=n.done?g:p,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=g,n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d="suspendedStart",p="suspendedYield",f="executing",g="completed",v={};function m(){}function h(){}function y(){}var w={};u(w,i,(function(){return this}));var b=Object.getPrototypeOf,C=b&&b(b(M([])));C&&C!==n&&o.call(C,i)&&(w=C);var O=y.prototype=m.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(r,i,a,s){var u=l(e[r],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==typeof d&&o.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,a,s)}),(function(e){n("throw",e,a,s)})):t.resolve(d).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,s)}))}s(u.arg)}var r;this._invoke=function(e,o){function i(){return new t((function(t,r){n(e,o,t,r)}))}return r=r?r.then(i,i):i()}}function S(e,n){var o=e.iterator[n.method];if(o===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,S(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=l(o,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var i=r.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function M(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(o.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:Z}}function Z(){return{value:t,done:!0}}return h.prototype=y,u(O,"constructor",y),u(y,"constructor",h),h.displayName=u(y,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,s,"GeneratorFunction")),e.prototype=Object.create(O),e},e.awrap=function(e){return{__await:e}},E(k.prototype),u(k.prototype,a,(function(){return this})),e.AsyncIterator=k,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new k(c(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(O),u(O,s,"Generator"),u(O,i,(function(){return this})),u(O,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=M,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(T),!e)for(var n in this)"t"===n.charAt(0)&&o.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(o,r){return s.type="throw",s.arg=e,n.next=o,r&&(n.method="next",n.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;T(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,o){return this.delegate={iterator:M(e),resultName:n,nextLoc:o},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=t:Function("r","regeneratorRuntime = r")(t)}},i({exports:{}});var i,a=function(){function e(){this.id=e.UNKNOWN_USER,this.language=void 0}var t=e.prototype;return t.reset=function(){this.id=e.UNKNOWN_USER,this.language=void 0},e.getDefault=function(){return new e},e.getAnon=function(){var t=new e;return t.id=e.ANON_USER,t},t.apply=function(t){return t instanceof e&&(this.id=t.id,null!=t&&t.language&&(this.language=t.language)),this},e.fromContext=function(t){return e.getDefault().apply(t)},e.fromTransport=function(t){var n=e.getDefault();if("object"==typeof t&&null!=t&&t.id){var o=t.id;"number"==typeof o?n.id=o:"string"==typeof o&&(n.id=parseInt(o,10)),n.language=null==t?void 0:t.lang}return n},e.fromWindow=function(){var t=window;return null!=t&&t._ulc&&"object"==typeof t._ulc?e.fromTransport(t._ulc):e.getDefault()},t.toTransport=function(){return{id:this.id,lang:this.language}},t.toString=function(){return JSON.stringify(this.toTransport())},t.updateWindow=function(){window._ulc=this.toTransport()},t.toScript=function(){return"window._ulc = "+this.toString()+";"},r(e,[{key:"lang",get:function(){return null==this?void 0:this.language}},{key:"isUnknown",get:function(){return this.id===e.UNKNOWN_USER}},{key:"isAnon",get:function(){return this.isUnknown||this.id===e.ANON_USER}},{key:"anon",get:function(){return this.isAnon}}]),e}();a.UNKNOWN_USER=-1,a.ANON_USER=0;var s={UNKNOWN:"",MEDIAWIKI:"mw",DISCUSSIONS:"dis",TRIVIA:"trivia",F2:"f2",FANHUB:"fanhub",VIDEO:"video",AUTH:"auth"},u=function(){function e(){this.$time=0,this.product=s.UNKNOWN,this.$time=Date.now()}var t=e.prototype;return t.reset=function(){this.product=s.UNKNOWN,this.productId=void 0,this.productVariant=void 0,this.productCategory=void 0,this.page=void 0,this.pageId=void 0,this.pageLanguage=void 0,this.adTags=void 0,this.$time=Date.now()},e.getDefault=function(){return new e},t.zeroTime=function(){return this.$time=0,this},t.apply=function(t){return t instanceof e&&(t.isUnknown||(this.product=t.product),null!=t&&t.productId&&(this.productId=t.productId),null!=t&&t.productVariant&&(this.productVariant=t.productVariant),null!=t&&t.productCategory&&(this.productCategory=t.productCategory),null!=t&&t.page&&(this.page=t.page),null!=t&&t.pageId&&(this.pageId=t.pageId),null!=t&&t.pageLanguage&&(this.pageLanguage=t.pageLanguage),null!=t&&t.adTags&&(this.adTags=t.adTags),null!=t&&t.$time&&"number"==typeof t.$time&&t.$time>0&&(this.$time=t.$time)),this},e.fromContext=function(t){return e.getDefault().apply(t)},e.fromTransport=function(t){var n=e.getDefault();return t.p&&(n.product=t.p,n.productId=null==t?void 0:t.pId,n.productVariant=null==t?void 0:t.pVar,n.productCategory=null==t?void 0:t.pCat,n.page=null==t?void 0:t.pg,n.pageId=null==t?void 0:t.pgId,n.pageLanguage=null==t?void 0:t.pgLang,n.adTags=null==t?void 0:t.adTags,n.$time="number"==typeof t.time&&t.time>0?t.time:Date.now()),n},e.fromWindow=function(){var t=window;return null!=t&&t._plc&&"object"==typeof t._plc?e.fromTransport(t._plc):e.getDefault()},t.toTransport=function(e){void 0===e&&(e=!1);var t={p:this.product,pId:null==this?void 0:this.productId,pVar:null==this?void 0:this.productVariant,pCat:null==this?void 0:this.productCategory,pg:null==this?void 0:this.page,pgId:null==this?void 0:this.pageId,pgLang:null==this?void 0:this.pageLanguage,adTags:null==this?void 0:this.adTags,time:this.time};return e&&(t.time=0),t},t.toString=function(e){return void 0===e&&(e=!1),JSON.stringify(this.toTransport(e))},t.updateWindow=function(e){void 0===e&&(e=!1);var t=window;t._plc=this.toTransport(e),e&&(t._plc.time=Date.now())},t.toScript=function(e){void 0===e&&(e=!1);var t="window._plc = "+this.toString(e)+";";return e&&(t+="window._plc.time = Date.now();"),t},r(e,[{key:"time",get:function(){return this.$time}},{key:"isUnknown",get:function(){return!this.isKnown}},{key:"isKnown",get:function(){return"string"==typeof this.product&&this.product!==s.UNKNOWN}},{key:"isValid",get:function(){return this.isKnown&&this.$time>0}}]),e}();function c(e){var t=document.cookie.match(RegExp("(?:^|;\\s*)"+e.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")+"=([^;]*)"));return t?t[1]:void 0}function l(){return c("wikia_beacon_id")||""}function d(){var e;return null!=(e=function(e){try{var t,n=decodeURIComponent(null!=(t=c("Geo"))?t:"{}");return n?JSON.parse(n):void 0}catch(e){return}}())?e:{}}function p(){return u.fromWindow()}},9996:e=>{"use strict";var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===n}(e)}(e)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,t){return!1!==t.clone&&t.isMergeableObject(e)?s((n=e,Array.isArray(n)?[]:{}),e,t):e;var n}function r(e,t,n){return e.concat(t).map((function(e){return o(e,n)}))}function i(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function a(e,t){try{return t in e}catch(e){return!1}}function s(e,n,u){(u=u||{}).arrayMerge=u.arrayMerge||r,u.isMergeableObject=u.isMergeableObject||t,u.cloneUnlessOtherwiseSpecified=o;var c=Array.isArray(n);return c===Array.isArray(e)?c?u.arrayMerge(e,n,u):function(e,t,n){var r={};return n.isMergeableObject(e)&&i(e).forEach((function(t){r[t]=o(e[t],n)})),i(t).forEach((function(i){(function(e,t){return a(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,i)||(a(e,i)&&n.isMergeableObject(t[i])?r[i]=function(e,t){if(!t.customMerge)return s;var n=t.customMerge(e);return"function"==typeof n?n:s}(i,n)(e[i],t[i],n):r[i]=o(t[i],n))})),r}(e,n,u):o(n,u)}s.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,n){return s(e,n,t)}),{})};var u=s;e.exports=u},2705:(e,t,n)=>{var o=n(5639).Symbol;e.exports=o},2488:e=>{e.exports=function(e,t){for(var n=-1,o=t.length,r=e.length;++n<o;)e[r+n]=t[n];return e}},1078:(e,t,n)=>{var o=n(2488),r=n(7285);e.exports=function e(t,n,i,a,s){var u=-1,c=t.length;for(i||(i=r),s||(s=[]);++u<c;){var l=t[u];n>0&&i(l)?n>1?e(l,n-1,i,a,s):o(s,l):a||(s[s.length]=l)}return s}},1957:(e,t,n)=>{var o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=o},7285:(e,t,n)=>{var o=n(2705),r=n(5694),i=n(1469),a=o?o.isConcatSpreadable:void 0;e.exports=function(e){return i(e)||r(e)||!!(a&&e&&e[a])}},5639:(e,t,n)=>{var o=n(1957),r="object"==typeof self&&self&&self.Object===Object&&self,i=o||r||Function("return this")();e.exports=i},5564:(e,t,n)=>{var o=n(1078);e.exports=function(e){return null!=e&&e.length?o(e,1):[]}},5694:e=>{e.exports=function(){return!1}},1469:e=>{var t=Array.isArray;e.exports=t},7334:(e,t,n)=>{var o=n(9833);e.exports=function(e){return o(e).toLowerCase()}},9833:e=>{e.exports=function(e){return e}},7841:()=>{Promise.any=e=>new Promise(((t,n)=>{var o,r,i,a,s;let u=!1,c=[],l=0,d=[];function p(e){u||(u=!0,t(e))}function f(e){d.push(e),d.length>=l&&n(d)}for(let t of e)l++,c.push(t);for(let e of c)void 0!==(null===(o=e)||void 0===o?void 0:o.then)||void 0!==(null===(r=e)||void 0===r?void 0:r.catch)?(null===(a=null===(i=e)||void 0===i?void 0:i.then((e=>p(e))))||void 0===a||a.catch((e=>{})),null===(s=e)||void 0===s||s.catch((e=>f(e)))):p(e)}))},9094:(e,t,n)=>{"use strict";function o(){return!!window.location.search.includes("ss_debug")||r()}n.d(t,{L1:()=>o,RG:()=>r});const r=()=>/^localhost/.test(location.hostname)||"127.0.0.1"===location.hostname},3338:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>f,_E:()=>g});const o=Object.values({SilverSurfer:"silversurfer",PathfinderExperiments:"pf-experiments",ClientSide:"browser-client-",Custom:"custom-"});var r,i;!function(e){e.CATEGORY="category",e.EVENT="event",e.LABEL="label",e.ACTION="action",e.VALUE="value",e.NON_INTERACTIVE="nonInteractive",e.IS_DEBUG="isDebug"}(r||(r={})),function(e){e.EXPERIMENT_VARIANT="experimentVariant",e.SS_VERSION="silverSurferVersion",e.AD_PVUID="pvUID",e.BEACON_ID="beaconId"}(i||(i={}));const a=[...Object.values(i),...Object.values(r)];function s(){var e,t,n;return null!==(n=null===(t=null===(e=null===window||void 0===window?void 0:window.google_tag_manager)||void 0===e?void 0:e.dataLayer)||void 0===t?void 0:t.gtmDom)&&void 0!==n&&n}function u(){s()&&(window.__datalayer_pre=window.__datalayer_pre||[],window.__datalayer_pre.length>0&&(window.__datalayer_pre_interval_id&&window.clearInterval(window.__datalayer_pre_interval_id),window.__datalayer_pre.forEach((e=>window.dataLayer.push(e))),window.__datalayer_pre=[]),window.__datalayer_pre_interval_id&&(window.clearInterval(window.__datalayer_pre_interval_id),window.__datalayer_pre_interval_id=null))}function c(e){if(e.isDebug=!!e.isDebug,e.event){if(window.dataLayer=window.dataLayer||[],e.category||(e.category=e.event),e.label||(e.label=e.category),e.isDebug){t=e.event,o.some((e=>t.includes(e)))||console.warn("[Tracking] GTM event not caught",e.event);const n=a;Object.keys(e).every((t=>!(!n.includes(t)&&!e.skipValidation&&(console.warn("[Tracking] Element not enabled in DW",t),1))))}return function(e){return window.__datalayer_pre=window.__datalayer_pre||[],s()?(u(),window.dataLayer.push(e)):window.__datalayer_pre.push(e)}(e)}var t;return console.error("[Tracking] missing 'event' field",e),null}window.__datalayer_pre_interval_id||s()||(window.__datalayer_pre_interval_id=window.setInterval(u,500));var l=n(9094);function d(e,t){const n=n=>{const o=Object.assign(Object.assign({nonInteractive:!0},e),n);return t(o),o};return n.click=t=>n(Object.assign(Object.assign(Object.assign({},e),t),{action:"click",nonInteractive:!1})),n.impression=t=>n(Object.assign(Object.assign(Object.assign({},e),t),{action:"impression",nonInteractive:!0})),n.hover=t=>n(Object.assign(Object.assign(Object.assign({},e),t),{action:"hover",nonInteractive:!0})),n.loaded=t=>n(Object.assign(Object.assign(Object.assign({},e),t),{action:"loaded",nonInteractive:!0})),n.extend=n=>d(Object.assign(Object.assign({},e),n),t),n}function p(e,t){const n=Object.assign({},e);if(!n.event&&!n.category)throw console.error("[Tracking] Missing event or category field",n),new Error("Missing event or category field");return n.category||(n.category=n.event),n.event||(n.event=n.category),d(n,t)}function f(e){return p(e,c)}function g(e){return`${(0,l.L1)()?"dev-":""}${e}`}p({category:"base-tracker"},c)},5551:(e,t,n)=>{"use strict";n.d(t,{x:()=>g,v:()=>f});var o=n(655),r=n(8074),i=n(681);function a(e,t=5){const n=6e4*t;return{get:()=>{try{const t=localStorage.getItem(e);return t?(e=>{const t=JSON.parse(e);return!(n=null==t?void 0:t.ttl)||n<Date.now()?null:t.data;var n})(t):null}catch(t){return console.warn(`Can't retrieve  ${e} from localStorage`),null}},set:t=>{try{const o=(e=>({data:e,ttl:Date.now()+n}))(t);localStorage.setItem(e,JSON.stringify(o))}catch(n){console.warn(`Can't write ${e} ${t} to localStorage`)}}}}var s=n(214);let u=null;function c(){var e,t,n,o;if(!u){const r=(0,s.b)(),i=null===(e=null===window||void 0===window?void 0:window.mw)||void 0===e?void 0:e.config.get("wikiCategories"),a=new URLSearchParams([["wId",r.pageContext.pId],...r.dateIsForced?[["dT",r.dateTime]]:[],...r.pageContext.pVar?[["s",r.pageContext.pVar]]:[],...(null===(o=null===(n=null===(t=r.pageContext)||void 0===t?void 0:t.adTags)||void 0===n?void 0:n.gnre)||void 0===o?void 0:o.length)?r.pageContext.adTags.gnre.map((e=>["g",e])):[],...(null==i?void 0:i.length)?i.map((e=>["c",e])):[]]).toString();u=new l("campaign-provider/widgets"+(a?`?${a}`:""))}return u}class l{constructor(e){this.path=e,this.storage=a(this.path)}getWidgets(){return this.widgetsPromise||(this.widgetsPromise=this.getFromCacheOrFetchSponsoredWidgets()),this.widgetsPromise}getFromCacheOrFetchSponsoredWidgets(){return(0,o.mG)(this,void 0,void 0,(function*(){let e=this.storage.get();if(e||(e=yield d("SponsoredWidgets",this.path),"string"==typeof e?this.storage.set(e):this.storage.set("null")),e)try{return yield JSON.parse(e)}catch(e){return null}return null}))}}function d(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){let n;try{n=yield(0,i.ck)(t)}catch(t){return r.Z.error(`${e}: fetching error`,t),null}return n.ok&&204!==n.status?n.text():(r.Z.debug(`${e}: no consumable data`,n),null)}))}var p=n(1640);function f(e){return(0,o.mG)(this,void 0,void 0,(function*(){const t=(0,p._)(e);if(!t)return null;const n=yield d(e,`campaign-provider/widgets/${t}`);try{return n?yield JSON.parse(n):null}catch(e){return null}}))}function g(e){var t;return(0,o.mG)(this,void 0,void 0,(function*(){const n=c();return null===(t=yield n.getWidgets())||void 0===t?void 0:t.filter((t=>t.widgetType===e))}))}},4463:(e,t,n)=>{"use strict";var o;n.d(t,{b:()=>o}),function(e){e.DesktopSameVertical="DesktopSameVertical",e.MobileSameVertical="MobileSameVertical"}(o||(o={}))},2187:(e,t,n)=>{"use strict";n.d(t,{h:()=>l,o:()=>c});var o=n(655),r=n(5551),i=n(768),a=n(9715),s=n(3492),u=n(9302);function c(e){var t;return(0,o.mG)(this,void 0,void 0,(function*(){const n="countdown-clock";if(e)return function(){const e=new Date;return e.setDate(e.getDate()+1),[{id:-1,widgetType:"countdown-clock",active:!0,startDateTime:null,endDateTime:e.toISOString(),countdownEndDateTime:e.toISOString(),ucpTargetings:[{id:-1,wikiId:null,articleIds:[],skins:[],geos:[],genres:[],categories:[]}],states:[{id:-1,startDateTime:null,clickThroughUrl:"https://fandom.com",ctaText:"",images:[{id:-1,size:{width:300,height:120},url:"https://static.wikia.nocookie.net/fandom-ae-assets/programmatic/widgets/countdown-clock-preview/countdown-clock-preview-PRE-300x120-v1.jpg"},{id:-2,size:{width:300,height:450},url:"https://static.wikia.nocookie.net/fandom-ae-assets/programmatic/widgets/countdown-clock-preview/countdown-clock-preview-PRE-300x450-v1.jpg"}]}]}]}();const o=null!==(t=yield(0,r.v)(n))&&void 0!==t?t:yield(0,r.x)(n);return o&&o.length?o:null}))}function l(e,t,n,r){var c,l;return(0,o.mG)(this,void 0,void 0,(function*(){const o="countdown-clock",d=function(e){switch(e){case u.i.DESKTOP:return{width:300,height:450};case u.i.MOBILE:return{width:300,height:120}}}(n),p=t?e[0]:(0,i.L)(e,r,o);if(!p)return null;const f=(0,a.w)(null!==(c=p.states)&&void 0!==c?c:[],r,o,null==p?void 0:p.id);if(!f)return null;const g=(0,s.I)(null!==(l=f.images)&&void 0!==l?l:[],d,o,p.id,f.id);return g?Object.assign(Object.assign({fontUrls:[]},f),{countdownClockId:p.id,countdownEndDate:new Date(p.countdownEndDateTime),image:g}):null}))}},8427:(e,t,n)=>{"use strict";n.d(t,{Q:()=>c,A:()=>u});var o=n(655),r=n(5551),i=n(768),a=n(9715),s=n(3492);function u(e){var t;return(0,o.mG)(this,void 0,void 0,(function*(){const n="sponsored-logo";if(e)return[{id:-1,widgetType:"sponsored-logo",active:!0,startDateTime:null,endDateTime:null,ucpTargetings:[{id:-1,wikiId:null,articleIds:[],skins:[],geos:[],genres:[],categories:[]}],states:[{id:-1,startDateTime:null,clickThroughUrl:"https://fandom.com",ctaText:"Premiers November 11, 2022! [**Click here!**](https://marvel.fandom.com/wiki/Black_Panther:_Wakanda_Forever)",sponsorText:"wakanda forever",images:[{id:-1,size:{width:36,height:36},url:"https://static.wikia.nocookie.net/fandom-ae-assets/programmatic/widgets/sponsored-logo-preview/sponsored-logo-preview-36x36-v1.png"}]}]}];const o=null!==(t=yield(0,r.v)(n))&&void 0!==t?t:yield(0,r.x)(n);return o&&o.length?o:null}))}function c(e,t,n){var r,u;return(0,o.mG)(this,void 0,void 0,(function*(){const o="sponsored-logo",c=t?e[0]:(0,i.L)(null!=e?e:[],n,o);if(!c)return null;const l=(0,a.w)(null!==(r=c.states)&&void 0!==r?r:[],n,o,null==c?void 0:c.id);if(!l)return null;const d=(0,s.I)(null!==(u=l.images)&&void 0!==u?u:[],{width:36,height:36},o,c.id,l.id);return d?Object.assign(Object.assign({},l),{sponsoredLogoId:c.id,imageUrl:d.url}):null}))}},7068:(e,t,n)=>{"use strict";n.d(t,{E:()=>o});const o=(e,t)=>{if(!e)return void(window.getCurrentQuizQuestion=()=>{});const n=e.answers.find((e=>e.isCorrect));n&&(window.getCurrentQuizQuestion=()=>({questionId:e.id,questionPosition:t,quizAnswerPosition:e.answers.indexOf(n),quizAnswerId:n.id,isGenai:e.isGenai}))}},5447:(e,t,n)=>{"use strict";n.d(t,{pT:()=>u,QY:()=>s,Vk:()=>i,qm:()=>a});var o=n(5426),r=n(1108);const i=e=>{setTimeout((()=>{s(document.querySelectorAll(e).length>0)}),1e3)},a=()=>{s(void 0)},s=e=>{console.log("PHQ="+e),window.pageHaveQuiz=e},u=()=>{void 0===window.pageHaveQuiz&&s(!!(0,o.fM)().some((e=>[r.PO.WikiQuizConsumptionModule,r.PO.DiscussionQuizConsumptionModule,r.PO.TriviaQuizConsumptionModule,r.PO.FanhubQuizConsumptionModule].includes(e.config.type)))&&void 0)}},6304:(e,t,n)=>{"use strict";n.d(t,{i:()=>o});const o=e=>{window.getQuizMetadata=()=>e?{quizId:e.id,quizTitle:e.title,isGenai:e.isGenai}:void 0}},3506:(e,t,n)=>{"use strict";n.d(t,{rz:()=>X,lV:()=>Y,K4:()=>ee});var o=n(655),r=n(9996),i=n.n(r),a=n(437),s=n(8074),u=n(1108),c=n(8114),l=n(8615);const d=c.Z.all(l.S9,l.pX,c.Z.any(l.Th,l.ny)),p=c.Z.all(l.yd,l.pX),f=[{name:"halo-effect-vertical-desktop",type:u.PO.HaloEffectVertical,insertConfig:{type:u.pz.Custom},targeting:c.Z.all(l.v9,c.Z.any(d,p,l.pq,l.v8,l.$5))}];var g=n(7756);const v=[{name:"in-wiki-email-in-context",type:u.PO.InWikiEmail,insertConfig:{type:u.pz.UcpInContext},config:{},targeting:c.Z.all(l.JI,l.GR,l.ok,c.Z.not({type:u.Bv.SilverSurferAction,actionType:g.U.SUBMIT,property:"name",value:"exit-signup"}))}],m=[{disabled:!1,name:"marketing-notifications",type:u.PO.MarketingNotifications,insertConfig:{type:u.pz.Custom},config:{impressionName:u.PO.MarketingNotifications},targeting:c.Z.all(l.Th,l.e1)}],h={type:u.Bv.Url,pathname:"Special:AdminDashboard"},y=[{disabled:!1,name:"notification-cms",type:u.PO.NotificationCMS,insertConfig:{type:u.pz.Custom},config:{},targeting:c.Z.all(l.v9,l.s3,l.Lj,h)}];var w=n(4463);const b=c.Z.all(l.yp,l.Th,l.pX,l.pP),C=c.Z.all(l.ke,l.Th,l.pX,l.pP),O=[{name:"desktop-related-wiki-recommendations",type:u.PO.OnWikiRecommendations,insertConfig:{type:u.pz.Custom},config:{variant:w.b.DesktopSameVertical},targeting:b},{name:"mobile-related-wiki-recommendations",type:u.PO.OnWikiRecommendations,insertConfig:{type:u.pz.Custom},config:{variant:w.b.MobileSameVertical},targeting:C}];var E,k=n(3098),S=n(675);!function(e){e.WithCatalog="WithCatalog"}(E||(E={}));const _={name:"quiz-creation-with-catalog",type:u.PO.QuizCreation,insertConfig:{type:u.pz.Element,selectors:[{selector:"main",method:u.Eo.Prepend}]},config:{type:E.WithCatalog},targeting:c.Z.all(l.Lj,{type:u.Bv.CurrentContext,property:"product",value:"dis"},c.Z.any({type:u.Bv.CurrentContext,property:"productId",value:"2750727"},{type:u.Bv.CurrentContext,property:"productId",value:"1081891"}),{type:u.Bv.CurrentContext,property:"page",value:"feed"})},T=[_,Object.assign(Object.assign({},_),{disabled:!0,name:"quiz-creation-with-catalog-e2e",config:{type:E.WithCatalog,fakeApis:!0}})];var x=n(6370),M=n(9302);const Z={type:u.pz.Element,selectors:[{selector:".global-navigation__links",method:u.Eo.Prepend}]},I=[{name:"sponsored-widgets-sponsored-logo-consumption-module",type:u.PO.SponsoredWidgetsSponsoredLogoConsumptionModule,insertConfig:Z,config:{sponsoredLogos:[]},targeting:c.Z.any(c.Z.all(l.nR,l.v9,l.S9,l.ok),c.Z.all(l.nR,l.v9,l.pq))}],P=[{name:"debug-menu",type:u.PO.DebugMenu,insertConfig:{type:u.pz.Instant},targeting:c.Z.any(l.yN,l.zo)}],A=[{disabled:!0,name:"web-push",type:u.PO.WebPush,insertConfig:{type:u.pz.Instant},config:{},targeting:[l.e4]}],D=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(113).then(n.bind(n,7135))).getHaloEffectVerticalModuleMethods(e)})),R=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(21).then(n.bind(n,3323))).getMarketingNotificationsModuleMethods(e)})),N=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(361).then(n.bind(n,6665))).getNotificationCMSModuleMethods(e)})),$=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(73).then(n.bind(n,5670))).getOnWikiRecommendationsModuleMethods(e)})),z=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(447).then(n.bind(n,9679))).getDiscussionQuizConsumptionModuleMethods(e)})),L=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(993).then(n.bind(n,9758))).getFanhubQuizConsumptionModuleMethods(e)})),B=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(737).then(n.bind(n,5597))).getTriviaQuizConsumptionModuleMethods(e)})),j=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(349).then(n.bind(n,959))).getWikiQuizConsumptionModuleMethods(e)})),U=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(348).then(n.bind(n,858))).getQuizCreationModuleMethods(e)})),G=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(986).then(n.bind(n,7546))).getQuizMetaEditorModuleMethods(e)}));var W=n(2187);const F=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){var t,o;const r=yield(0,W.o)(null!==(o=null===(t=null==e?void 0:e.internalState)||void 0===t?void 0:t.forced)&&void 0!==o&&o);if(r&&r.length)return(yield n.e(595).then(n.bind(n,8390))).getSponsoredWidgetsCountdownClockConsumptionModuleMethods(Object.assign(Object.assign({},e),{config:Object.assign(Object.assign({},e.config),{countdownClocks:r})}))}));var Q=n(8427);const V=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){var t,o;const r=yield(0,Q.A)(null!==(o=null===(t=null==e?void 0:e.internalState)||void 0===t?void 0:t.forced)&&void 0!==o&&o);if(r&&r.length)return(yield n.e(606).then(n.bind(n,2973))).getSponsoredWidgetsSponsoredLogoConsumptionModuleMethods(Object.assign(Object.assign({},e),{config:Object.assign(Object.assign({},e.config),{sponsoredLogos:r})}))})),q=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(632).then(n.bind(n,253))).getPicturesNearParagraphModuleMethods(e)})),K=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return n.e(495).then(n.bind(n,1582)).then((t=>t.getInWikiEmailModuleMethods(e)))})),H=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(307).then(n.bind(n,1408))).getDebugMenuModuleMethods(e)})),J=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return(yield n.e(667).then(n.bind(n,867))).getWebPushModuleMethods(e)}));function Y(){return[].concat(P,v,f,S.Z,T,x.Z,y,m,O,M.Z,I,k.Z,A).filter(Boolean)}function X(){let e=Y();return e=e.map((e=>i()({internalState:{}},e))),(0,a.n3)()&&(s.Z.debug("RulesEngine: All the modules exposed to window.pathfinderAllModules"),window.pathfinderAllModules=JSON.stringify(e)),e}function ee(e){const t={[u.PO.DebugMenu]:H,[u.PO.InWikiEmail]:K,[u.PO.MarketingNotifications]:R,[u.PO.NotificationCMS]:N,[u.PO.HaloEffectVertical]:D,[u.PO.OnWikiRecommendations]:$,[u.PO.SponsoredWidgetsCountdownClockConsumptionModule]:F,[u.PO.SponsoredWidgetsSponsoredLogoConsumptionModule]:V,[u.PO.QuizCreation]:U,[u.PO.WikiQuizConsumptionModule]:j,[u.PO.QuizMetaEditorModule]:G,[u.PO.DiscussionQuizConsumptionModule]:z,[u.PO.TriviaQuizConsumptionModule]:B,[u.PO.FanhubQuizConsumptionModule]:L,[u.PO.PicturesNearParagraph]:q,[u.PO.WebPush]:J};return"function"==typeof t[e]?t[e]:()=>(0,o.mG)(this,void 0,void 0,(function*(){return!1}))}},5601:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var o=n(8074),r=n(2718),i=n(7904);function a(){const e=(0,i.Z)("ss_pathfinder_forced"),t=(0,r.Q2)();if(e)return o.Z.info("RulesEngine: Forcing module",e),t&&o.Z.info(`RulesEngine: Ignoring permanently forced module (from "${r.zn}" cookie)`,t),e;const n=(0,i.Z)("ss_pathfinder_permaforced");return n?(o.Z.info("RulesEngine: Permanently forcing module (expires in 30 days)",n),(0,r.XA)(n),n):t?(o.Z.info(`RulesEngine: Permanently forcing module (from "${r.zn}" cookie)`,t),t):void 0}},3098:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,m:()=>i});var o=n(1108),r=n(8615);const i={A:"pictures-near-paragraph-a",B:"pictures-near-paragraph-b",C:"pictures-near-paragraph-control"},a=!0,s=[{disabled:a,name:"pictures-near-paragraph-control",type:o.PO.PicturesNearParagraph,insertConfig:{type:o.pz.Custom},config:{variant:i.C},targeting:r.yp,buckets:[]},{disabled:a,name:"pictures-near-paragraph-a",type:o.PO.PicturesNearParagraph,insertConfig:{type:o.pz.Custom},config:{variant:i.A},targeting:r.yp,buckets:[]},{disabled:a,name:"pictures-near-paragraph-b",type:o.PO.PicturesNearParagraph,insertConfig:{type:o.pz.Custom},config:{variant:i.B},targeting:r.yp,buckets:[]}]},675:(e,t,n)=>{"use strict";n.d(t,{W:()=>o,Z:()=>p});var o,r=n(8114),i=n(8615),a=n(1108);!function(e){e.Desktop="after_toc_placement",e.Mobile="after_infobox_placement"}(o||(o={}));const s={type:a.Bv.MwConfig,property:"wgFandomQuizzesEnabled",value:!0},u={type:a.Bv.FandomQuizzes,property:"wgFandomQuizzesEnabled",value:!0},c={type:a.Bv.FandomQuizzes,property:"wgFandomQuizzesOnFepoEnabled",value:!0},l=r.Z.any({type:a.Bv.CurrentContext,property:"page",value:"article"},{type:a.Bv.DomNode,selector:"#mw-content-text [data-quiz-anchor]"}),d=r.Z.any({type:a.Bv.CurrentContext,property:"page",value:"quiz-index"},{type:a.Bv.CurrentContext,property:"page",value:"quiz-page"}),p=[{name:"wiki-quiz-consumption-module-desktop",type:a.PO.WikiQuizConsumptionModule,insertConfig:{type:a.pz.Custom},config:{variant:o.Desktop},targeting:r.Z.all(s,i.gU,i.s3,l)},{name:"wiki-quiz-consumption-module-mobile",type:a.PO.WikiQuizConsumptionModule,insertConfig:{type:a.pz.Custom},config:{variant:o.Mobile},targeting:r.Z.all(s,i.gU,i.LP,l)},{name:"discussion-quiz-consumption-module",type:a.PO.DiscussionQuizConsumptionModule,insertConfig:{type:a.pz.Custom},targeting:r.Z.all(u,c,i.yd)},{name:"trivia-quiz-consumption-module",type:a.PO.TriviaQuizConsumptionModule,insertConfig:{type:a.pz.Custom},targeting:r.Z.all(i.$5,d)},{name:"fanhub-quiz-consumption-module",type:a.PO.FanhubQuizConsumptionModule,insertConfig:{type:a.pz.Custom},targeting:r.Z.all(i.v8)}]},6370:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s,g:()=>o});var o,r=n(8114),i=n(8615),a=n(1108);!function(e){e.Discussions="discussions",e.Trivia="trivia"}(o||(o={}));const s=[{name:"discussions-quiz-targeting-editor-module",type:a.PO.QuizMetaEditorModule,insertConfig:{type:a.pz.Custom},config:{variant:o.Discussions},targeting:r.Z.all(i.Lj,{type:a.Bv.CurrentContext,property:"product",value:"dis"},r.Z.any({type:a.Bv.CurrentContext,property:"productId",value:"2750727"},{type:a.Bv.CurrentContext,property:"productId",value:"1081891"}),r.Z.any({type:a.Bv.CurrentContext,property:"page",value:"feed"},{type:a.Bv.CurrentContext,property:"page",value:"post"}))},{name:"trivia-quiz-targeting-editor-module",type:a.PO.QuizMetaEditorModule,insertConfig:{type:a.pz.Custom},config:{variant:o.Trivia},targeting:r.Z.all(i.Lj,{type:a.Bv.CurrentContext,property:"product",value:"trivia"},{type:a.Bv.CurrentContext,property:"page",value:"quiz-page"})}]},9302:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d,i:()=>o});var o,r=n(1108),i=n(8114),a=n(8615);!function(e){e[e.DESKTOP=0]="DESKTOP",e[e.MOBILE=1]="MOBILE"}(o||(o={}));const s=".portable-infobox-wrapper, .mw-parser-output > p, .fandom-stats",u={type:r.pz.Element,selectors:[{selector:"#WikiaRail, .main-page-tag-rcs #top_boxad",method:r.Eo.After},{selector:".main-page-tag-rcs",method:r.Eo.Prepend}]},c={type:r.pz.Element,selectors:[{selector:s,method:r.Eo.After}]},l={type:r.Bv.AtLeastDomNodes,selector:s,min:2},d=[{name:"sponsored-widgets-countdown-clock-consumption-module-desktop",type:r.PO.SponsoredWidgetsCountdownClockConsumptionModule,insertConfig:u,config:{countdownClocks:[],variant:o.DESKTOP},targeting:i.Z.all(a.v9,a.S9,a.nR,i.Z.any(a.Th,a.ny))},{name:"sponsored-widgets-countdown-clock-consumption-module-mobile",type:r.PO.SponsoredWidgetsCountdownClockConsumptionModule,insertConfig:c,config:{countdownClocks:[],variant:o.MOBILE},targeting:i.Z.all(a.i1,a.S9,a.nR,l,i.Z.any(a.Th,a.ny))}]},4089:(e,t,n)=>{"use strict";n.d(t,{Nq:()=>ue,Po:()=>se,os:()=>ce});var o=n(655),r=n(8074),i=n(1108);const a=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return document.querySelectorAll(e.selector).length>=e.min})),s=e=>{const{selector:t,min:n}=e;return!("string"!=typeof t||!t.length||"number"!=typeof n||n<=0)};var u=n(9960);const c=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{value:t}=e;return Array.isArray(t)?t.includes((0,u.l)()):t===(0,u.l)()})),l=e=>{const{value:t}=e;return!(t&&!t.length)};var d=n(9267);const p=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{cookieName:t,value:n}=e,o=(0,d.A)(t);return!!o&&(Array.isArray(n)?n.some((e=>o.includes(e))):!((null==n?void 0:n.length)>0)||o.includes(n))})),f=e=>{const{cookieName:t,value:n}=e;return!("string"!=typeof t||!t.length||n&&!n.length)};var g=n(4485);const v=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){var t,n;const o=(0,g.$r)(),{property:i,value:a,adTags:s}=e;try{if("string"==typeof i){const e=a.toLowerCase();if("adTags"!==i){const t=o[i];return(null==t?void 0:t.toLowerCase())===e}{const n=null!==(t=null==o?void 0:o.adTags)&&void 0!==t?t:{};return Object.values(n).reduce(((e,t)=>e.concat(t)),[]).map((e=>e.toLowerCase())).some((t=>t===e))}}if(void 0!==s){const e=null!==(n=null==o?void 0:o.adTags)&&void 0!==n?n:{};let t=!0;for(const[n,o]of Object.entries(s))t&&(t=o.every((t=>e[n].includes(t))));return t}}catch(t){r.Z.error("RulesEngine/currentContext: Exception",t,e)}return!1})),m=e=>{const{property:t,value:n}=e;return!("string"!=typeof t||!t.length||n&&("string"!=typeof n||!n.length))},h=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{start:t,end:n}=e,o=Date.now();let r=!0;return"number"==typeof t&&o<t&&r&&(r=!1),"number"==typeof n&&o>n&&r&&(r=!1),r})),y=e=>{const{start:t,end:n}=e;return!(t&&"number"!=typeof t||n&&"number"!=typeof n||t&&n&&!(t<=n))},w=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{selector:t,attribute:n,value:o}=e,i=document.querySelector(t);if(!i)return!1;if(n&&!(null==i?void 0:i.hasAttribute(n)))return!1;if(n&&(null==o?void 0:o.length)>0)try{return new RegExp(o).test(i.getAttribute(n))}catch(t){return r.Z.error("RulesEngine/domNode: Exception",t,e),!1}return!0})),b=e=>{const{selector:t,attribute:n,value:o}=e;return!("string"!=typeof t||!t.length||n&&("string"!=typeof n||!n.length)||o&&("string"!=typeof o||!o.length))},C=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){var t,n;const o=(null===(n=null===(t=window.mw)||void 0===t?void 0:t.config)||void 0===n?void 0:n.get("isTestWiki"))||!1;return e.value===o})),O=e=>{const{value:t}=e;return"boolean"==typeof t};var E=n(1703);const k=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){var t;return null===(t=null===document||void 0===document?void 0:document.referrer)||void 0===t?void 0:t.includes(e.urlContains)})),S=e=>{const{urlContains:t}=e;return!("string"!=typeof t||!t.length)};var _;!function(e){e.Height="Height",e.Width="Width"}(_||(_={}));const T={[_.Width]:"innerWidth",[_.Height]:"innerHeight"},x=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{property:t,min:n,max:o}=e;try{if(void 0!==n||void 0!==o){const e=window[T[t]];let r=!0;return"number"==typeof n&&r&&(r=e>=n),"number"==typeof o&&r&&(r=e<=n),r}r.Z.error("RuleEngine/checkScreenSizeRule: Neither min nor max value was defined",e)}catch(t){r.Z.error("RuleEngine/checkScreenSizeRule: Exception",t,e)}return!1})),M=e=>{const{property:t,min:n,max:o}=e;return!(!Object.values(_).includes(t)||n&&("number"!=typeof n||n<0)||o&&("number"!=typeof o||o<0)||(o&&n?!(o<=n):!o&&!n))};var Z=n(5426),I=n(7756);const P=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{actionType:t,property:n,value:o}=e;try{const e=yield window.SilverSurferSDK.getActions((0,Z.LP)(),t);return void 0===n&&(null==e?void 0:e.length)>0||!!e.find((e=>e[n]===o))}catch(t){r.Z.error("RuleEngine/checkSilverSurferActionRule: Exception",t,e)}return!1})),A=e=>{const{actionType:t,property:n,value:o}=e;return!(!Object.values(I.U).includes(t)||n&&("string"!=typeof n||!n.length)||o&&("string"!=typeof o||!o.length))};var D=n(437);const R=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return D.Xw})),N=e=>!0;var $=n(7904);const z=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{branch:t}=e;return"canary"===t?"true"===(0,$.Z)(D.Gr.CANARY):(0,$.Z)(D.Gr.BRANCH)===t})),L=e=>{const{branch:t}=e;return!("string"!=typeof t||!t.length)};function B(e){return Array.isArray(e)?e:"string"==typeof e?[e]:void 0}function j(e,t){return e.some((e=>new RegExp(e,"i").test(t)))}const U=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{location:t}=window;try{const n=B(null==e?void 0:e.href),o=B(null==e?void 0:e.host),r=B(null==e?void 0:e.pathname),i=B(null==e?void 0:e.search);return!(n&&!j(n,t.href)||o&&!j(o,t.host)||r&&!j(r,t.pathname)||i&&!j(i,t.search))}catch(t){r.Z.error("RuleEngine/checkUrlRule: Exception",t,e)}return!1})),G=e=>void 0===e||"string"==typeof e||Array.isArray(e)&&e.every((e=>"string"==typeof e)),W=e=>{const{href:t,host:n,pathname:o,search:r}=e;return G(t)&&G(n)&&G(o)&&G(r)};var F=n(5686),Q=n(7018),V=n(812);const q=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){var t,n;const{lastVisitedPages:o,property:i,value:a,adTags:s,atLeast:u}=e;try{const e=window.SilverSurferSDK.getContext().pages.slice(0,o);let r=0;for(const o of e){if("string"==typeof i){if("adTags"===i){const e=a.toLowerCase(),n=null!==(t=null==o?void 0:o.adTags)&&void 0!==t?t:{};return Object.values(n).reduce(((e,t)=>e.concat(t)),[]).map((e=>e.toLowerCase())).some((t=>t===e))}{const e=o[i],t=a.toLowerCase();(null==e?void 0:e.toLowerCase())===t&&r++}}if(void 0!==s){const e=null!==(n=null==o?void 0:o.adTags)&&void 0!==n?n:{};let t=!0;for(const[n,o]of Object.entries(s))t&&(t=o.every((t=>e[n].includes(t))));t&&r++}}return r>=u}catch(t){r.Z.error("RulesEngine/visitedPages: Exception",t,e)}return!1})),K=e=>{const{lastVisitedPages:t,property:n,value:o,atLeast:r}=e;return!("number"!=typeof t||"string"!=typeof n||!n.length||"string"!=typeof o||!o.length||"number"!=typeof r)};var H=n(7334),J=n.n(H);const Y=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{any:t}=e,n=Array.from(document.querySelectorAll('a[href^="/wiki/Category"]')).map((e=>e.innerText)).map(J());return!(!Array.isArray(t)||!t.length)&&t.map((e=>new RegExp(e,"i"))).map((e=>n.some((t=>e.test(t))))).some((e=>e))})),X=e=>{const{any:t}=e;return!(!Array.isArray(t)||t.some((e=>"string"!=typeof e)))},ee=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){return!0})),te=e=>!0,ne=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{context:t,property:n,value:o}=e;if((0,g.$r)().product!==g.xs.MEDIAWIKI)return r.Z.debug("RuleEngine/checkFandomContext: Unsupported product"),!1;try{if(!window.fandomContext||!window.fandomContext[t])return r.Z.error("RuleEngine/checkFandomContext: fandomContext not initialized"),!1;const e=window.fandomContext[t][n];return void 0===e?(r.Z.error(`RuleEngine/checkFandomContext: property [${n}] does not exist in fandomContext [${t}]`),!1):Array.isArray(e)?"number"==typeof o||"string"==typeof o?e.some((e=>e===o)):o.some((t=>e.includes(t))):Array.isArray(o)?"number"==typeof e||"string"==typeof e?o.some((t=>t===e)):e.some((e=>o.includes(e))):"object"==typeof o&&o?Object.keys(e).some((t=>e[t]===o[t])):e===o}catch(t){r.Z.error("RuleEngine/checkFandomContext: Exception",t,e)}return!1})),oe=e=>{const{context:t,property:n,value:o}=e;return!("string"!=typeof t||!["site","page"].includes(t)||"string"!=typeof n||!n.length||!o)},re=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{property:t,value:n}=e;try{const e=window.quizzes;if(!e)return r.Z.debug("RuleEngine/checkFandomQuizzes: window.quizzes not initialized"),!1;const o=e[t];return void 0===o?(r.Z.error(`RuleEngine/checkFandomQuizzes: property [${t}] does not exist in quizzes object [${e}]`),!1):o===n}catch(t){r.Z.error("RuleEngine/checkFandomQuizzes: Exception",t,e)}})),ie=e=>{const{property:t,value:n}=e;return!("string"!=typeof t||!t.length)&&"boolean"==typeof n};function ae(e,t,n){switch(e){case i.CU.And:return t&&n;case i.CU.Or:return t||n;case i.CU.Not:return!t}}function se(e){return(0,o.mG)(this,void 0,void 0,(function*(){return new Promise(((t,n)=>{ue(e).then((n=>{t(n?e:void 0)})).catch((n=>{r.Z.error("RulesEngine: Exception when checking targeting rules",n,e),t(void 0)}))}))}))}function ue(e){return(0,o.mG)(this,void 0,void 0,(function*(){const t={[i.Bv.TestOnlyInDev]:R,[i.Bv.TestOnlyOnBranch]:z,[i.Bv.AlwaysLoad]:ee,[i.Bv.CurrentContext]:v,[i.Bv.UserLoggedIn]:V.U,[i.Bv.VisitedPages]:q,[i.Bv.SilverSurferAction]:P,[i.Bv.Referrer]:k,[i.Bv.UserDevice]:F.ij,[i.Bv.DomNode]:w,[i.Bv.DateRange]:h,[i.Bv.UserGeo]:Q.s,[i.Bv.Cookie]:p,[i.Bv.ScreenSize]:x,[i.Bv.Url]:U,[i.Bv.WikiCategory]:Y,[i.Bv.MwConfig]:E.n,[i.Bv.IsTestWiki]:C,[i.Bv.AtLeastDomNodes]:a,[i.Bv.Browser]:c,[i.Bv.FandomContext]:ne,[i.Bv.FandomQuizzes]:re},n=`RulesEngine/Targeting [${e.name}]:`;r.Z.debug(`${n} Checking targeting rules`,e);const s=e.targeting,u=[];r.Z.debug(`${n} Converting rules to function calls`);const l=s.map((e=>{if("string"!=typeof e){const i=null==t?void 0:t[e.type];if("function"==typeof i)return()=>(0,o.mG)(this,void 0,void 0,(function*(){try{return{result:yield i(e),rule:e}}catch(t){return r.Z.error(`${n} Exception when checking rule`,t,e),{result:!1,rule:e}}}))}return()=>(0,o.mG)(this,void 0,void 0,(function*(){return{result:e,rule:e}}))}));e.internalState||(e.internalState={}),e.internalState=Object.assign(Object.assign({},e.internalState),{targetingEvaluations:[]});const d=yield Promise.all(l.map((e=>e&&e())));if(e.internalState.targetingEvaluations.push(...d.slice()),r.Z.debug(`${n} Parsing targeting stack`,d),d.slice(0,2).some((({result:e})=>"string"==typeof e&&(e===i.CU.And||e===i.CU.Or))))return r.Z.error(`${n} Incorrect operator order! You cannot use 'and|or' as first two items as there is no previous value to operate on`,u),!1;if(s.forEach(((e,t)=>{if("boolean"==typeof d[t].result)return r.Z.debug(`${n} Step ${t}: Push ${d[t].result} to stack from`,e),void u.push(d[t].result);if("string"!=typeof e)r.Z.error(`${n} Unknown rule`,e);else if(e===i.CU.Not){const o=u.pop(),i=ae(e,o);r.Z.debug(`${n} Step ${t}: Using operator: ${e} ${o} => ${i}`),u.push(i)}else{const o=u.pop(),i=u.pop(),a=ae(e,i,o);r.Z.debug(`${n} Step ${t}: Using operator: ${i} ${e} ${o} => ${a}`),u.push(a)}})),1!==u.length)return r.Z.error(`${n} Incorrect targeting rules! Leftover stack has ${u.length} items!`,u),!1;const f=u.pop();return void 0===f?(r.Z.error(`${n} Incorrect targeting rules! Found 'undefined' value. Please check your targeting rules`,u),!1):(r.Z.debug(`${n} Final value`,f),e.internalState.targetingEvaluationsResult=f,f)}))}function ce(e){let t=0;const n=Object.values(i.CU),o=Object.values(i.Bv),a={[i.Bv.TestOnlyInDev]:N,[i.Bv.TestOnlyOnBranch]:L,[i.Bv.AlwaysLoad]:te,[i.Bv.CurrentContext]:m,[i.Bv.UserLoggedIn]:V.J,[i.Bv.VisitedPages]:K,[i.Bv.SilverSurferAction]:A,[i.Bv.Referrer]:S,[i.Bv.UserDevice]:F.D1,[i.Bv.DomNode]:b,[i.Bv.DateRange]:y,[i.Bv.UserGeo]:Q.A,[i.Bv.Cookie]:f,[i.Bv.ScreenSize]:M,[i.Bv.Url]:W,[i.Bv.WikiCategory]:X,[i.Bv.MwConfig]:E.l,[i.Bv.IsTestWiki]:O,[i.Bv.AtLeastDomNodes]:s,[i.Bv.Browser]:l,[i.Bv.FandomContext]:oe,[i.Bv.FandomQuizzes]:ie};return e.forEach((e=>{const s=`RulesEngine/validateTargeting: Error in "${e.name}"`,{targeting:u}=e;if(!Array.isArray(u)||u.length<1)return r.Z.error(`${s} - not an array or not enough elements`),void t++;const c=u.reduce(((e,t)=>e+(function(e,t,n,o){const i="RulesEngine/validateOperatorOrRule";return"string"==typeof e?!!t.includes(e)||(r.Z.error(`${i} - unknown operator`,e),!1):"string"==typeof(null==e?void 0:e.type)?n.includes(e.type)?!!(0,o[e.type])(e)||(r.Z.error(`${i} - rule config is invalid`,e),!1):(r.Z.error(`${i} - unknown rule`,e),!1):(r.Z.error(`${i} - incorrect element`,e),!1)}(t,n,o,a)?0:1)),0);c>0&&(r.Z.error(`${s} - one or more rules are incorrect`),t+=c);let l=0;u.forEach((e=>{if("string"==typeof e){const t=e;t!==i.CU.And&&t!==i.CU.Or||(l<2&&r.Z.error(`${s} - incorrect operator on stack, ${t} requires two values`),l--),t===i.CU.Not&&l<1&&r.Z.error(`${s} - incorrect operator on stack, ${t} requires one value`)}else l++})),1!==l&&r.Z.error(`${s} - incorrect stack size: ${l} (should be a one)`,u)})),t}},8114:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var o=n(5564),r=n.n(o),i=n(1108);function a(e){return(...t)=>{if(t.length<2)return r()(t);const n=[];return t.forEach(((t,o)=>{n.push(t),o>0&&n.push([e])})),r()(n)}}const s={not:function(e){if(Array.isArray(e)&&0===e.length)return[];const t=[];return t.push(e),t.push([i.CU.Not]),r()(t)},any:a(i.CU.Or),all:a(i.CU.And)}},8615:(e,t,n)=>{"use strict";n.d(t,{$5:()=>c,GR:()=>O,JI:()=>N,LP:()=>b,Lj:()=>f,S9:()=>s,Th:()=>h,e1:()=>z,e4:()=>M,gU:()=>D,i1:()=>m,ke:()=>$,nR:()=>g,ny:()=>y,ok:()=>E,pP:()=>L,pX:()=>p,pq:()=>d,s3:()=>w,v8:()=>l,v9:()=>v,yN:()=>x,yd:()=>u,yp:()=>R,zo:()=>k});var o=n(9960),r=n(1108),i=n(5686),a=n(8114);const s={type:r.Bv.CurrentContext,property:"product",value:"mw"},u={type:r.Bv.CurrentContext,property:"product",value:"dis"},c={type:r.Bv.CurrentContext,property:"product",value:"trivia"},l={type:r.Bv.CurrentContext,property:"product",value:"fanhub"},d={type:r.Bv.CurrentContext,property:"product",value:"f2"},p={type:r.Bv.CurrentContext,property:"pageLanguage",value:"en"},f={type:r.Bv.UserLoggedIn,value:!0},g={type:r.Bv.UserLoggedIn,value:!1},v={type:r.Bv.UserDevice,deviceType:i.If.Desktop},m={type:r.Bv.UserDevice,deviceType:i.If.Mobile},h={type:r.Bv.CurrentContext,property:"page",value:"article"},y={type:r.Bv.CurrentContext,property:"page",value:"home"},w={type:r.Bv.MwConfig,property:"skin",value:"fandomdesktop"},b={type:r.Bv.MwConfig,property:"skin",value:"fandommobile"},C={type:r.Bv.DomNode,selector:"body",attribute:"class",value:"has-featured-video"},O={type:r.Bv.CurrentContext,property:"productCategory",value:"tv"},E={type:r.Bv.DomNode,selector:"body",attribute:"class",value:"ns-0"},k={type:r.Bv.TestOnlyInDev,value:!0},S={type:r.Bv.TestOnlyOnBranch,value:"canary"},_={type:r.Bv.IsTestWiki,value:!0},T={type:r.Bv.UserGeo,country:["us"]},x=(r.Bv.AlwaysLoad,{type:r.Bv.Url,search:"ss_debug=true"}),M={type:r.Bv.Url,host:"www.fandom.com"},Z=(r.Bv.MwConfig,{type:r.Bv.MwConfig,property:"wgAction",value:["edit","mapedit"]}),I={type:r.Bv.CurrentContext,property:"page",value:"topic"},P={type:r.Bv.Url,search:"(?:action|veaction)=edit"},A={type:r.Bv.Browser,browser:o.A.Safari},D=a.Z.all(s,g),R=a.Z.all(v,D),N=a.Z.all(m,D),$=(a.Z.all(R,h),a.Z.all(N,h)),z=(a.Z.not(C),a.Z.all(p,T),a.Z.any(k,S),a.Z.not(_),a.Z.not(Z)),L=(a.Z.all(s,y),a.Z.all(d,a.Z.any(I,y)),a.Z.not(P));a.Z.not(A)},1703:(e,t,n)=>{"use strict";n.d(t,{l:()=>s,n:()=>a});var o=n(655),r=n(4485),i=n(8074);const a=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const{property:t,value:n}=e;if((0,r.$r)().product!==r.xs.MEDIAWIKI)return i.Z.debug("RuleEngine/checkMwConfig: Unsupported product"),!1;try{if(!window.mw||!window.mw.config)return i.Z.error("RuleEngine/checkMwConfig: mw not initialized"),!1;const e=window.mw.config.get(t);return void 0===e?(i.Z.error(`RuleEngine/checkMwConfig: property [${t}] does not exist in mw`),!1):Array.isArray(n)?"number"==typeof e||"string"==typeof e?n.some((t=>t===e)):e.some((e=>n.includes(e))):"object"==typeof n&&n?Object.keys(e).some((t=>e[t]===n[t])):e===n}catch(t){i.Z.error("RuleEngine/checkMwConfig: Exception",t,e)}return!1})),s=e=>{const{property:t,value:n}=e;return!("string"!=typeof t||!t.length||!n)}},5686:(e,t,n)=>{"use strict";n.d(t,{D1:()=>u,If:()=>o,ij:()=>s});var o,r,i=n(655),a=n(1671);!function(e){e.Desktop="desktop",e.Mobile="mobile"}(o||(o={})),function(e){e.Landscape="landscape",e.Portrait="portrait"}(r||(r={}));const s=e=>(0,i.mG)(void 0,void 0,void 0,(function*(){const{deviceType:t,deviceOrientation:n}=e;let i=!0;return t&&i&&(i=t===(!1===(0,a.XS)()?o.Desktop:o.Mobile)),n&&i&&(i=n===function(){var e,t;const n=null!==(e=null===window||void 0===window?void 0:window.innerHeight)&&void 0!==e?e:0;return(null!==(t=null===window||void 0===window?void 0:window.innerWidth)&&void 0!==t?t:0)>=n?r.Landscape:r.Portrait}()),i})),u=e=>{const{deviceType:t,deviceOrientation:n}=e;return!(t&&!Object.values(o).includes(t)||n&&!Object.values(r).includes(n))}},7018:(e,t,n)=>{"use strict";n.d(t,{A:()=>a,s:()=>i});var o=n(655),r=n(4485);const i=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){const t=(null!==(o=null===(n=(0,r.Vp)())||void 0===n?void 0:n.country)&&void 0!==o?o:"us").toLowerCase();var n,o;const{country:i}=e;return i.some((e=>e.toLowerCase()===t))})),a=e=>{const{country:t}=e;return!(!Array.isArray(t)||t.some((e=>"string"!=typeof e)))}},812:(e,t,n)=>{"use strict";n.d(t,{J:()=>u,U:()=>s});var o=n(655),r=(n(7841),n(3810)),i=n(8074);const a=(0,r.Z)({eventCheck:()=>{var e;return void 0!==(null===window||void 0===window?void 0:window._ulc)||void 0!==(null===(e=null===window||void 0===window?void 0:window.fandom)||void 0===e?void 0:e.user)},intervalTime:50,maxWaitTime:5e3,onReject:()=>({id:0}),onResolve:()=>{var e,t;return(null===(e=null===window||void 0===window?void 0:window._ulc)||void 0===e?void 0:e.id)?null===window||void 0===window?void 0:window._ulc:null===(t=null===window||void 0===window?void 0:window.fandom)||void 0===t?void 0:t.user}}),s=e=>(0,o.mG)(void 0,void 0,void 0,(function*(){try{const t=yield a(),n="string"==typeof t.id?parseInt(t.id,10):t.id;return e.value===n>0}catch(e){0===(null==e?void 0:e.id)?i.Z.debug("checkUserLoggedInRule: timed out waiting for user to be available, assuming anon"):i.Z.debug("checkUserLoggedInRule: error while waiting for user to be available, assuming anon",e)}return!e.value})),u=e=>{const{value:t}=e;return"boolean"==typeof t}},1108:(e,t,n)=>{"use strict";var o,r,i,a,s;n.d(t,{Bv:()=>o,CU:()=>s,Eo:()=>a,PO:()=>r,pz:()=>i}),function(e){e.Example="Example",e.AlwaysLoad="AlwaysLoad",e.TestOnlyInDev="TestOnlyInDev",e.TestOnlyOnBranch="TestOnlyOnBranch",e.CurrentContext="CurrentContext",e.UserLoggedIn="UserLoggedIn",e.VisitedPages="VisitedPages",e.UserDevice="UserDevice",e.DomNode="DomNode",e.DateRange="DateRange",e.UserGeo="UserGeo",e.Cookie="UserCookie",e.SilverSurferAction="SilverSurferAction",e.ScreenSize="ScreenSize",e.Url="Url",e.Referrer="Referrer",e.WikiCategory="WikiCategory",e.MwConfig="mwConfig",e.IsTestWiki="IsTestWiki",e.AtLeastDomNodes="AtLeastDomNodes",e.Browser="Browser",e.FandomContext="FandomContext",e.FandomQuizzes="FandomQuizzes"}(o||(o={})),function(e){e.Example="ExampleModule",e.InWikiEmail="InWikiEmailModule",e.DebugMenu="DebugMenuModule",e.HaloEffectVertical="HaloEffectVerticalModule",e.WikiQuizConsumptionModule="WikiQuizConsumptionModule",e.DiscussionQuizConsumptionModule="DiscussionQuizConsumptionModule",e.TriviaQuizConsumptionModule="TriviaQuizConsumptionModule",e.FanhubQuizConsumptionModule="FanhubQuizConsumptionModule",e.QuizCreation="QuizCreation",e.QuizMetaEditorModule="QuizMetaEditorModule",e.NotificationCMS="NotificationCMS",e.MarketingNotifications="MarketingNotifications",e.OnWikiRecommendations="OnWikiRecommendations",e.SponsoredWidgetsCountdownClockConsumptionModule="SponsoredWidgetsCountdownClockConsumptionModule",e.SponsoredWidgetsSponsoredLogoConsumptionModule="SponsoredWidgetsSponsoredLogoConsumptionModule",e.PicturesNearParagraph="PicturesNearParagraph",e.WebPush="WebPush"}(r||(r={})),function(e){e.Instant="Instant",e.Element="Element",e.UcpInContext="UcpInContext",e.Custom="Custom"}(i||(i={})),function(e){e.After="After",e.Append="Append",e.Before="Before",e.Prepend="Prepend"}(a||(a={})),function(e){e.And="AND",e.Or="OR",e.Not="NOT"}(s||(s={}))},5426:(e,t,n)=>{"use strict";n.d(t,{LP:()=>s,T6:()=>r,fM:()=>u,gv:()=>a,yc:()=>i});const o={silverSurferToken:null,allModules:[],renderedModules:[]},r=()=>{o.renderedModules=[]},i=e=>{o.renderedModules=e},a=e=>{o.silverSurferToken=e},s=()=>o.silverSurferToken,u=()=>o.renderedModules},8459:(e,t,n)=>{"use strict";n.d(t,{Eq:()=>s,Es:()=>d,fK:()=>l,mG:()=>a,o3:()=>c,yI:()=>u});var o=n(655),r=n(5426),i=n(8074);function a(e,t,n){return(0,o.mG)(this,void 0,void 0,(function*(){if("string"==typeof e&&e.length)try{return yield window.SilverSurferSDK.addAction((0,r.LP)(),e,t,n),i.Z.debug("saveAction",{name:e,type:t,payload:n}),!0}catch(o){i.Z.error("saveAction exception",o,{name:e,type:t,payload:n})}return!1}))}function s(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){try{return(yield window.SilverSurferSDK.getActions((0,r.LP)(),t)).filter((t=>t.name===e))}catch(n){i.Z.error("getAllActions exception",n,{name:e,type:t})}return[]}))}function u(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){const n=yield s(e,t),[o]=n;return o}))}function c(e,t){return(0,o.mG)(this,void 0,void 0,(function*(){yield a(e,window.SilverSurferSDK.ACTION.IMPRESSION,t)}))}const l=864e5,d=7*l},681:(e,t,n)=>{"use strict";n.d(t,{ck:()=>a,rL:()=>c,Sw:()=>u});var o=n(437);o._u;const r=((e,t)=>(e,n)=>function(e,t,n,o={}){console.error("logErrorEvent",{client:e,clientVersion:t,name:n,data:o})}("pathfinder",t,e,(({ok:e,redirected:t,status:n,statusText:o,type:r,url:i})=>({ok:e,redirected:t,status:n,statusText:o,type:r,url:i}))(n)))(0,o._u);function i(e,t,n){return void 0===n&&(n={}),fetch(t,n).then((n=>("opaque"===n.type||n.ok||401===n.status||404===n.status||("function"==typeof e?e(t,n):console.error("fetchWithLogging Error",{url:t,response:n})),n)))}const a=(s=r,(e,t={})=>i(s,(0,o.sH)()+e,Object.assign({mode:"cors",credentials:"include"},t)));var s;const u=(e=>(t,n,r={})=>i(e,(0,o.sH)()+t,Object.assign({method:"POST",credentials:"include",body:n},r)))(r),c=(e=>(t,n,r={})=>i(e,(0,o.sH)()+t,Object.assign({method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",credentials:"include",body:JSON.stringify(n)},r)))(r)},9960:(e,t,n)=>{"use strict";var o;function r(){const e=navigator.userAgent,t=navigator.vendor;return null!==e.match(/chrome|chromium|crios/i)&&t.match(/Google/i)?o.Chrome:e.match(/firefox|fxios/i)&&""===t?o.Firefox:e.indexOf("Safari")&&t.match(/Apple/i)&&-1==e.indexOf("CriOS")&&-1==e.indexOf("FxiOS")?o.Safari:null!==e.match(/opr\//i)?o.Opera:null!==e.match(/edg/i)?o.Edge:1!=e.indexOf("Trident")&&document.documentMode?o.IE:o.Others}n.d(t,{A:()=>o,l:()=>r}),function(e){e.Chrome="Chrome",e.Firefox="Firefox",e.Edge="Edge",e.Safari="Safari",e.Opera="Opera",e.IE="IE",e.Others="Others"}(o||(o={}))},8074:(e,t,n)=>{"use strict";n.d(t,{A:()=>u,Z:()=>c});var o=n(437);function r(){}const i=Date.now(),a=(e,t,n=[])=>(a,...s)=>((e,t,n,a,...s)=>{const u=function(e){return"error"===e?console.error:"debug"===e?(0,o.n3)()||(0,o.RG)()?console.debug:r:console.log}(e),c=`%c${t} | ${((Date.now()-(null!==(d=null===(l=window.performance)||void 0===l?void 0:l.timeOrigin)&&void 0!==d?d:i))/1e3).toFixed(4)}s | ${a}`;var l,d;s.length?u(c,n,...s):u(c,n)})(t,e,n.join(";"),a,...s);function s(e){return["color: #fff","padding: 2px 4px","border-radius: 2px",`background-color: ${e}`]}function u(e){return{info:a(`Pathfinder Module | ${e.name}`,"info",s("#334")),debug:a(`Pathfinder Module | ${e.name}`,"debug",s("#550")),error:a(`Pathfinder Module | ${e.name}`,"error",s("#800"))}}const c={info:a("Pathfinder","info",s("#334")),debug:a("Pathfinder","debug",s("#550")),error:a("Pathfinder","error",s("#800"))}},2718:(e,t,n)=>{"use strict";n.d(t,{Q2:()=>s,XA:()=>c,g4:()=>u,zn:()=>a});var o=n(437),r=n(9267),i=n(8074);const a="pf_fm";function s(){return(0,r.A)(a)}function u(){document.cookie=`${a}=; path=/; domain=${location.hostname}; expires=${new Date(0).toUTCString()}`,(0,r.A)(a)||i.Z.info("Permanent forced module's cookie was deleted successfully")}function c(e){const t=(0,o.RG)()?"":"domain=.fandom.com";document.cookie=`${a}=${e}; max-age=2592000; ${t}; path=/`}},214:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});var o=n(4485);function r(){var e;const t=function(){const e=/[?&]sw_date=([^&]+)/.exec(window.location.search),t=e?new Date(decodeURIComponent(e[1])):null;return t&&("Invalid Date"!==t.toString()?t:null)}();return{dateTime:(t||new Date).toISOString(),dateIsForced:null!==t,geo:null!==(e=(0,o.Vp)().country)&&void 0!==e?e:"",pageContext:window.SilverSurferSDK.getContext().current.toTransport()}}},3492:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var o=n(8074);function r(e,t,n,r,i){return e.sort(((e,t)=>e.id-t.id)).find((e=>e.size.width===t.width&&e.size.height===t.height))||(o.Z.debug(`${n}: widget(${r}): state(${i}): no applicable images`),null)}},768:(e,t,n)=>{"use strict";n.d(t,{L:()=>s});var o=n(8074);function r(e,t){if(!e.active)return"not active";const n=(o=e.startDateTime,r=e.endDateTime,i=t.dateTime,o&&i<o?"`startDateTime` > device `dateTime`":r&&r<=i?"`endDateTime` <= device `dateTime`":null);var o,r,i;if("string"==typeof n)return n;const a=function(e,t){switch(t.pageContext.p){case"mw":case"f2":return function(e,t){if(0===e.length)return"not enabled on UCP";const n=[];return e.find((e=>{var o,r,i;const a=`UCPTargeting(${e.id}): doesn't cover `;if(e.wikiId&&e.wikiId!==t.pageContext.pId)return n.push(a+"wikiId"),!1;if(e.wikiId&&e.articleIds.length&&!e.articleIds.includes(t.pageContext.pgId))return n.push(a+"articleId"),!1;if("f2"!==t.pageContext.p&&e.skins.length&&!e.skins.includes(t.pageContext.pVar))return n.push(a+"skin"),!1;if(e.geos.length&&!e.geos.includes(t.geo))return n.push(a+"geo"),!1;if(e.genres.length&&(!(null===(i=null===(r=null===(o=t.pageContext)||void 0===o?void 0:o.adTags)||void 0===r?void 0:r.gnre)||void 0===i?void 0:i.length)||!e.genres.find((e=>t.pageContext.adTags.gnre.includes(e)))))return n.push(a+"genres"),!1;if(window.mw){const t=window.mw.config.get("wikiCategories");if(null!=e.categories&&e.categories.length&&(!t||!e.categories.some((e=>t.includes(e)))))return n.push(a+"categories"),!1}return n.splice(0,n.length),!0})),n.length&&n.reduce(((e,t)=>e+", "+t))||null}(e.ucpTargetings,t);default:return"not supported product"}}(e,t);return"string"==typeof a?a:null}function i(e){return e.startDateTime&&isNaN(Date.parse(e.startDateTime))?"`startDateTime` is invalid":e.endDateTime&&isNaN(Date.parse(e.endDateTime))?"`endDateTime` is invalid":null}var a=n(1640);function s(e,t,n,s=void 0,u=void 0){e=e.sort(((e,t)=>e.id-t.id));const c=`${n}: `,l=(0,a._)(n);for(const n of e){if(l===n.id.toString())return n;const e=c+`widget(${n.id}): `,a=t=>o.Z.error(e+t),d=i(n);if("string"==typeof d){a(d);continue}const p=s?s(n):null;if("string"==typeof p){a(p);continue}const f=t=>o.Z.debug(e+t),g=r(n,t);if("string"==typeof g){f(g);continue}const v=u?u(n,t):null;if("string"!=typeof v)return n;f(v)}return o.Z.debug(c+"no applicable widgets"),null}},9715:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var o=n(8074);function r(e,t){return e.startDateTime&&t.dateTime<e.startDateTime?"device `dateTime` < `startDateTime`":null}function i(e){return e.startDateTime&&isNaN(Date.parse(e.startDateTime))?"`startDateTime` is invalid":null}function a(e,t,n,a,s=void 0,u=void 0){e=[...e.filter((e=>null!==e.startDateTime)).sort(((e,t)=>t.startDateTime.localeCompare(e.startDateTime))),...e.filter((e=>null===e.startDateTime)).sort(((e,t)=>e.id-t.id))];const c=`${n}: widget(${a}): `;for(const n of e){const e=c+`state(${n.id}): `,a=t=>o.Z.error(e+t),l=i(n);if("string"==typeof l){a(l);continue}const d=s?s(n):null;if("string"==typeof d){a(d);continue}const p=t=>o.Z.debug(e+t),f=r(n,t);if("string"==typeof f){p(f);continue}const g=u?u(n,t):null;if("string"!=typeof g)return n;p(g)}return o.Z.debug(c+"no applicable states"),null}},1640:(e,t,n)=>{"use strict";function o(e){const t=new RegExp("[?&]sw_preview="+e+"-([^&]+)").exec(window.location.search);return t&&t[1]}n.d(t,{_:()=>o})},396:(e,t,n)=>{"use strict";n.r(t),n.d(t,{buildModuleTrackingFunction:()=>i,buildTrackingFunctions:()=>u,trackExperimentsModule:()=>s,trackRootPathfinder:()=>a});var o=n(437),r=n(3338);function i(e){return u(e.type,e.name)}function a(e={}){return u("PF","Root")(e)}function s(e,t={}){return i(e)(t)}function u(e,t){const n=(0,o.mJ)(),i=`pf-experiments${n?"-dev":""}: ${e}`;return(0,r.ZP)({category:i,experimentVariant:t,isDebug:n})}},7756:(e,t,n)=>{"use strict";var o;n.d(t,{U:()=>o}),function(e){e.ADD="add",e.CLICK="click",e.CLOSE="close",e.CONFIRM="confirm",e.CREATE="create",e.DISABLE="disable",e.ENABLE="enable",e.ERROR="error",e.HOVER="hover",e.IMPRESSION="impression",e.IDENTITY="identity",e.KEYPRESS="keypress",e.NO_IMPRESSION="no-impression",e.OPEN="open",e.PLAY_VIDEO="play-video",e.QUIZ="quiz",e.REACTION="reaction",e.REMOVE="remove",e.SELECT="select",e.SHARE="share",e.SUBMIT="submit",e.SUCCESS="success",e.SWIPE="swipe",e.VIEW="view",e.REACTION_COUNT="reaction-count",e.HEALTH="health",e.HIGHLIGHT="highlight",e.MYFANDOM="myfandom",e.CALENDAR_EVENTS="calendarevents",e.COLLECTIONITEM="collectionitem"}(o||(o={}))},437:(e,t,n)=>{"use strict";n.d(t,{Gr:()=>a,RG:()=>s,V1:()=>u,Xw:()=>d,_u:()=>l,h:()=>c,mJ:()=>g,n3:()=>f,q2:()=>r,sH:()=>i});var o=n(9094);function r(){return!("undefined"==typeof window||!window.location||!window.location.hostname)&&window.location.hostname.includes("fandom.com")}function i(){return r()?"https://services.fandom.com/":"https://services.fandom-dev."+(location.hostname.match(/(?!\.)(pl|us)$/)||["us"])[0]+"/"}const a={DEBUG:"ss_debug",BRANCH:"ss_branch_deploy",CANARY:"ss_canary",ENABLED_PATHFINDER_MODULE:"ss_pathfinder_enable",FORCED_PATHFINDER:"ss_pathfinder_forced",FORCED_BUCKETING:"ss_pathfinder_force_bucket"},s=o.RG,u=()=>/fandom-dev\.(pl|us)$/.test(location.hostname),c=()=>/fandom-dev\.pl/.test(location.hostname),l=(null==="af185231f\n"?void 0:"af185231f\n".replace(/\n/g,""))||"local",d=!1,p=e=>window.location.search.includes(e),f=()=>p(`${a.DEBUG}=true`);function g(){const e=Object.values(a);for(let t=0;t<e.length;t++)if(p(e[t]))return!0;return!1}},9267:(e,t,n)=>{"use strict";function o(e){const t=document.cookie.match(RegExp("(?:^|;\\s*)"+e.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")+"=([^;]*)"));return t?t[1]:null}n.d(t,{A:()=>o})},7904:(e,t,n)=>{"use strict";function o(e,t){var n;const o=new URLSearchParams(null===(n=null===window||void 0===window?void 0:window.location)||void 0===n?void 0:n.search);return o.has(e)?o.get(e):t}n.d(t,{Z:()=>o})},7045:(e,t,n)=>{"use strict";n.d(t,{VB:()=>i,wj:()=>u});var o=n(655),r=n(3810);const i=["fandommobile","wikiamobile","mobileve","mobileskin"],a=(0,r.Z)({eventCheck:()=>{var e;return!!(null===(e=null===window||void 0===window?void 0:window.mw)||void 0===e?void 0:e.config)},intervalTime:10,maxWaitTime:5e3,onReject:()=>null,onResolve:()=>window.mw.config});let s=null;const u=()=>(0,o.mG)(void 0,void 0,void 0,(function*(){var e,t;return null!==(t=null===(e=yield function(){return(0,o.mG)(this,void 0,void 0,(function*(){return s||(s=yield a()),null!=s?s:{}}))}())||void 0===e?void 0:e.get("isDarkTheme"))&&void 0!==t&&t}))},1671:(e,t,n)=>{"use strict";n.d(t,{XS:()=>r,ZP:()=>a,vu:()=>i});var o=n(7045);const r=()=>{const e=(null===navigator||void 0===navigator?void 0:navigator.userAgent)||(null===navigator||void 0===navigator?void 0:navigator.vendor)||(null===window||void 0===window?void 0:window.opera);return/windows phone/i.test(e)?"windows-phone":/android/i.test(e)?"android":!(!/ipad|iphone|ipod/i.test(e)||window.MSStream)&&"ios"},i=()=>{const e=new URLSearchParams(null===window||void 0===window?void 0:window.location.search),t=!!e.has("mobile-app")&&e.get("mobile-app"),n=e.has("useskin")?e.get("useskin"):"",r=o.VB.some((e=>e===n.toLowerCase()));return t||r},a=()=>i()||r()||(null===window||void 0===window?void 0:window.matchMedia("screen and (max-width: 727px)").matches)},6355:(e,t,n)=>{"use strict";function o(e){setTimeout(e,1)}n.d(t,{Z:()=>o})},3810:(e,t,n)=>{"use strict";function o(e){let t=0;const n="function"==typeof(null==e?void 0:e.onResolve)?e.onResolve:()=>{},o="function"==typeof(null==e?void 0:e.onReject)?e.onReject:()=>{};return()=>new Promise(((r,i)=>{const a=setInterval((()=>{e.eventCheck()&&(clearInterval(a),r(n())),e.intervalTime*t>e.maxWaitTime&&(clearInterval(a),i(o())),t++}),e.intervalTime)}))}n.d(t,{Z:()=>o})},655:(e,t,n)=>{"use strict";function o(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}function r(e,t,n,o){return new(n||(n=Promise))((function(r,i){function a(e){try{u(o.next(e))}catch(e){i(e)}}function s(e){try{u(o.throw(e))}catch(e){i(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((o=o.apply(e,t||[])).next())}))}n.d(t,{_T:()=>o,mG:()=>r}),Object.create,Object.create}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,exports:{}};return r[e].call(n.exports,n,n.exports,a),n.exports}a.m=r,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"==typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"==typeof n.then)return n}var r=Object.create(null);a.r(r);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&o&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,a.d(r,i),r},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((t,n)=>(a.f[n](e,t),t)),[])),a.u=e=>(({21:"marketingNotificationsUnit",73:"onWikiRecommendationsUnit",113:"haloEffectVerticalModuleUnit",172:"marketingNotification-forcedModuleData",245:"quizConsumption",307:"debugMenuModule",348:"quizCreationModule",349:"wikiQuizConsumptionModule",361:"notificationCMSUnit",447:"discQuizConsumptionModule",495:"inWikiEmailUnit",595:"SponsoredWidgetsSponsoredLogoConsumptionModule",606:"SponsoredWidgetsCountdownClockConsumptionModule",632:"picturesNearParagraphUnit-loader",666:"intersection_observer_polyfills",667:"web-push-module-loader",737:"trivQuizConsumptionModule",913:"web-push-fandom-firebase",949:"PicturesNearParagraphModule--Component",986:"quizTargetingEditorUnit",993:"fanhubQuizConsumptionModule"}[e]||e)+"-pathfinder.js"),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},o="@fandom/silver-surfer:",a.l=(e,t,r,i)=>{if(n[e])n[e].push(t);else{var s,u;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var d=c[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==o+r){s=d;break}}s||(u=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",o+r),s.src=e),n[e]=[t];var p=(t,o)=>{s.onerror=s.onload=null,clearTimeout(f);var r=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((e=>e(o))),t)return t(o)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),u&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");if(n.length)for(var o=n.length-1;o>-1&&!e;)e=n[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={179:0};a.f.j=(t,n)=>{var o=a.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var r=new Promise(((n,r)=>o=e[t]=[n,r]));n.push(o[2]=r);var i=a.p+a.u(t),s=new Error;a.l(i,(n=>{if(a.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",s.name="ChunkLoadError",s.type=r,s.request=i,o[1](s)}}),"chunk-"+t,t)}};var t=(t,n)=>{var o,r,[i,s,u]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in s)a.o(s,o)&&(a.m[o]=s[o]);u&&u(a)}for(t&&t(n);c<i.length;c++)r=i[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0},n=self.webpackChunk_fandom_silver_surfer=self.webpackChunk_fandom_silver_surfer||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),a.nc=void 0,(()=>{"use strict";var e=a(655),t=a(3338);const n=(0,t.ZP)({event:"browser-client-alerting"});var o,r,i;!function(e){e.INIT="roots-initial",e.LOADED="roots-loaded"}(o||(o={})),function(e){e.SS_PRE_BOOTSTRAP="ss_pre_bootstrap",e.SS_SDK_START="ss_sdk_start",e.SS_SDK_LOADED="ss_sdk_loaded",e.SS_SDK_READY="ss_sdk_ready",e.SS_CROSS_DOMAIN_READY="ss_cross_domain_ready",e.SS_CROSS_DOMAIN_REGISTER_START="ss_cross_domain_register_start",e.SS_CROSS_DOMAIN_REGISTER_ALL_PAGES_DONE="ss_cross_domain_register_all_pages_done"}(r||(r={})),function(e){e.PF_START="pf_start",e.PF_LOADED="pf_loaded",e.PF_READY="pf_ready"}(i||(i={}));var s=a(9094);const u="__frontend_utils_consistent_random",c=(0,t.ZP)({event:"browser-client-timings"}),l=.005;let d=new Map;function p(e,t){var n,o;d.set(e,t),n=e,o=t,((0,s.L1)()||(window[u]||(window[u]=Math.random()),window[u]<=l))&&c({category:`timings-event-${n}`,label:o.toString(),action:"timed",value:o})}function f(e){try{const t=Math.round(Date.now()-function(){if(!window.performance&&!window.performance.timeOrigin)throw new Error("Performance value not set");return window.performance.timeOrigin}());return p(e,t),(0,s.L1)()&&console.log("Timing",e,t),t}catch(e){console.error("TimingRecord Error",e)}}var g=a(8074),v=a(437),m=a(3810);const h=Date.now();let y=-1;const w=(0,m.Z)({eventCheck:()=>{var e;return null===(e=null===window||void 0===window?void 0:window.SilverSurferSDK)||void 0===e?void 0:e.isReady()},intervalTime:10,maxWaitTime:6e4,onReject:()=>{console.error("silver-surfer-loaded-timeout")},onResolve:()=>{y<0&&(y=Date.now()-h),(0,v.n3)()&&console.debug("silver-surfer-loaded",y)}});var b=a(6355),C=a(3506),O=a(4089),E=a(4485),k=a(7904);const S=0,_=/[0-9a-zA-Z_-]+/;function T(e=S){const t=(0,k.Z)("ss_pathfinder_force_bucket");if(void 0!==t&&(null==t?void 0:t.length)>0)return null==t?void 0:t[e];const n=(0,E.Do)()||"0";return null==n?void 0:n[e]}var x;!function(e){e.Valid="Valid",e.Invalid="Invalid",e.Control="Control"}(x||(x={}));var M=a(5601);const Z=e=>Promise.all(e.map((e=>e.then((e=>({status:"fulfilled",value:e}))).catch((e=>({status:"rejected",reason:e}))))));function I(t){return(0,e.mG)(this,void 0,void 0,(function*(){return(yield Z(t)).filter((e=>"fulfilled"===e.status)).map((e=>null==e?void 0:e.value)).filter(Boolean)}))}var P=a(5426);function A(e){return e.map((e=>e.config.name))}function D(t){return(0,e.mG)(this,void 0,void 0,(function*(){return new Promise(((e,n)=>{try{(0,C.K4)(t.type)(t).then((n=>{n?e(Object.assign({config:t},n)):(g.Z.debug("RulesEngine: Module failed to provide methods (no result)",t),e(!1))})).catch((n=>{g.Z.error("RulesEngine: Module failed to provide methods (exception from getModuleMethod)",t,n),e(!1)}))}catch(n){g.Z.error("RulesEngine: Module failed to provide methods (exception getting getModuleMethod)",t,n),e(!1)}}))}))}function R(e){const t=null==e?void 0:e.limitTraffic;return void 0===t||("number"==typeof t?Math.random()<t:"string"==typeof t?t.includes(T()):!!Array.isArray(t)&&t.some(((e,t)=>e.includes(T(t)))))}var N=a(1108);var $=a(396),z=a(8459);function L(e){const t="RulesEngine/callInsertModule:";try{"function"==typeof(null==e?void 0:e.render)&&(g.Z.debug(`${t} Rendering module`,e),function(e){var t,n,o;const r=e.config,i=e.render(),a=null!==(n=null===(t=e.config)||void 0===t?void 0:t.impressionName)&&void 0!==n?n:e.config.type;(0,$.trackExperimentsModule)(r,{nonInteractive:!0,action:"inserted"});const s=()=>{g.Z.debug("RulesEngine/Insert: Module shown",r),"function"==typeof e.show&&e.show(),(0,z.o3)(a),(0,$.trackExperimentsModule)(r,{nonInteractive:!0,action:"loaded"})};if(i instanceof Element)switch(g.Z.debug("RulesEngine/Insert: Rendering and inserting hidden module",r),r.insertConfig.type){case N.pz.Instant:return document.querySelector("body").appendChild(i),void s();case N.pz.Element:{const e=r.insertConfig.selectors;let t,n=N.Eo.Append;for(const o of e)if(t=document.querySelector(o.selector),t){n=o.method;break}if(t){switch(n){case N.Eo.After:t.after(i);break;case N.Eo.Append:t.append(i);break;case N.Eo.Before:t.before(i);break;case N.Eo.Prepend:t.prepend(i);break;default:return void g.Z.error("RulesEngine/Insert: Unknown method",n,r)}s()}else g.Z.error("RulesEngine/Insert: Could not find an element to attach",r);return}case N.pz.UcpInContext:(function(e,t){var n;let o=0;const r=Array.from(document.querySelectorAll("#mw-content-text p")).filter((e=>!e.classList.contains("caption"))).map((e=>(o+=e.textContent.replace(/\s/g,"").length,{node:e,charCountSum:o})));let i,a=r.findIndex((({charCountSum:e})=>e>t))-1;for(;a>0&&a<r.length;){const{node:e}=r[a];if("P"===(null===(n=null==e?void 0:e.previousElementSibling)||void 0===n?void 0:n.tagName)){i=e;break}a++}void 0!==i?i.before(e):document.querySelector("#mw-content-text").appendChild(e)})(i,null!==(o=r.insertConfig.characters)&&void 0!==o?o:0),s()}else e.config.insertConfig.type===N.pz.Custom?(g.Z.debug("RulesEngine/Insert: Custom module, skipping inserting",r),s()):g.Z.error("RulesEngine/Insert: Module.render did not return HTML",r)}(e))}catch(e){g.Z.error(`${t} Exception`,e)}}function B(e){const t="RulesEngine/callCleanupModule:";try{"function"==typeof(null==e?void 0:e.cleanup)&&(g.Z.debug(`${t} Calling cleanup`,e),e.cleanup())}catch(e){g.Z.error(`${t} Exception`,e)}}var j=a(7068),U=a(6304),G=a(5447);function W(){return(0,e.mG)(this,void 0,void 0,(function*(){const t=yield function(){return(0,e.mG)(this,void 0,void 0,(function*(){const t="RulesEngine/getAvailableModules:";g.Z.debug(`${t} Checking available modules`);const n=A((0,P.fM)()),o=yield function(t=[]){return(0,e.mG)(this,void 0,void 0,(function*(){const e="RulesEngine/getModuleCandidates:",n=(0,C.rz)();if(!n.length)return g.Z.error(`${e} No modules`),[];g.Z.debug(`${e} Modules`,n);const o=(0,M.Z)();let r;o&&(r=n.find((e=>e.name===o)));let i=n.filter((e=>!(null==e?void 0:e.disabled)));if(g.Z.debug(`${e} Enabled modules`,i),t.length&&(i=i.filter((e=>!t.includes(e.name))),!i.length))return[];const a=i.filter(R);g.Z.debug(`${e} Enabled modules in current traffic`,a);const s=function(e){const t=e.filter((e=>!(null==e?void 0:e.buckets))),n=e.filter((e=>null==e?void 0:e.buckets)),o=T();return[...t,...n.filter((e=>e.buckets.some((e=>e.includes(o)))))]}(a);g.Z.debug(`${e} Modules with buckets applied`,s);const u=yield I(s.map(O.Po));if(g.Z.debug(`${e} Module candidates`,u),r&&!t.includes(o)){g.Z.info(`${e} Forced module, forcing it`,r),r.internalState.forced=!0;const t=u.filter((e=>e.name!==(null==r?void 0:r.name)));return t.unshift(r),t}return u}))}(n);if(!o.length)return g.Z.debug(`${t} No candidates`),[];const r=(0,M.Z)();!r||o.map((e=>e.name)).includes(r)||n[r]||g.Z.error(`${t} Cannot find forced module`,r);const i=yield I(o.map(D));return g.Z.debug(`${t} Available modules`,i),i}))}();t.forEach(L),g.Z.info("Rendered modules",A(t)),(0,P.yc)(t)}))}function F(){return(0,e.mG)(this,void 0,void 0,(function*(){g.Z.debug("Loaded"),f(i.PF_LOADED),v.Xw&&function(){const e=(0,C.lV)();let t=0;g.Z.info("RulesEngine: Validating ALL the modules that are present in the code"),console.groupCollapsed("RulesEngine: Expand module validation errors"),e.forEach((e=>{t+=function(e){let t=0;const n=`RulesEngine/validation: ${e.name}`,o=["internalState"];if(o.push("disabled"),null==e?void 0:e.disabled){const{disabled:o}=e;"boolean"!=typeof o&&(g.Z.error(`${n} - 'disabled' not boolean`),t++)}if(o.push("limitTraffic"),null==e?void 0:e.limitTraffic){const{limitTraffic:o}=e;"number"==typeof o?(o<=0&&(g.Z.error(`${n} - 'limitTraffic' <= 0 disables the module`),t++),o>1&&(g.Z.error(`${n} - 'limitTraffic' > 1 always enables the module`),t++)):"string"==typeof o?_.test(o)||(g.Z.error(`${n} - 'limitTraffic' has incorrect buckets`),t++):Array.isArray(o)?o.some((e=>!_.test(e)))&&(g.Z.error(`${n} - 'limitTraffic' has incorrect buckets`),t++):(g.Z.error(`${n} - 'limitTraffic' is malformed`),t++)}if(o.push("name"),null==e?void 0:e.name){const{name:o}=e;/^[a-z0-9_-]+$/.test(o)||(g.Z.error(`${n} - 'name' can only use lower case letters, nuumbers, dash, and underscore`),t++)}else g.Z.error(`${n} - 'name' is missing`),t++;if(o.push("impressionName"),null==e?void 0:e.impressionName){const{impressionName:o}=e;"string"!=typeof o&&(g.Z.error(`${n} - 'impressionName' not string`),t++)}if(o.push("type"),null==e?void 0:e.type){const{type:o}=e;Object.values(N.PO).includes(o)||(g.Z.error(`${n} - 'type' unknown`),t++)}else g.Z.error(`${n} - 'type' is missing`),t++;if(o.push("buckets"),null==e?void 0:e.buckets){const{buckets:o}=e;Array.isArray(o)?(o.some((e=>!_.test(e)))?(g.Z.error(`${n} - incorrect 'buckets'`,o),t++):(g.Z.error(`${n} - 'buckets' is malformed`),t++),(null==e?void 0:e.disabled)&&o.length>0&&g.Z.info(`${n} - config still has buckets, but it is disabled; this can cause confusion, consider removing those buckets`)):(g.Z.error(`${n} - 'buckets' is not an array`,o),t++)}if(o.push("insertConfig"),null==e?void 0:e.insertConfig)switch(Object.values(N.pz).includes(e.insertConfig.type)||(g.Z.error(`${n} - 'insertConfig.type' unknown`,e.insertConfig.type),t++),e.insertConfig.type){case N.pz.Element:{const{selectors:o}=e.insertConfig;Array.isArray(o)&&o.length?o.some((({selector:e,method:t})=>"string"!=typeof e||!Object.values(N.Eo).includes(t)))&&(g.Z.error(`${n} - incorrect 'insertConfig.selectors'`,o),t++):(g.Z.error(`${n} - 'insertConfig.selectors' is not an non-empty array`),t++);break}case N.pz.UcpInContext:{const{characters:o}=e.insertConfig;!o||"number"==typeof o&&o>=0||(g.Z.error(`${n} - 'insertConfig.characters' is not a positive number`,o),t++);break}}else g.Z.error(`${n} - 'insertConfig' is missing`),t++;o.push("config"),o.push("priority"),(null==e?void 0:e.priority)&&("number"!=typeof e.priority||isNaN(e.priority)?g.Z.error(`${n} - 'priority' can only be an integer, not a float, string, boolean, array, etc`):Number.isInteger(e.priority)||g.Z.error(`${n} - 'priority' cannot be a float, integer only`)),o.push("targeting");const r=Object.keys(e).filter((e=>!o.includes(e)));return r.length&&g.Z.error(`${n} - Found fields that couldn't be validated :`,r),t}(e)})),t+=(0,O.os)(e),console.groupEnd(),t>0?g.Z.error(`RulesEngine: Validation finished for ${e.length} modules, found ${t} errors`):g.Z.info(`RulesEngine: Validation finished for ${e.length} modules, no errors found`)}();try{yield W(),$.trackRootPathfinder({action:"viewable",label:"true"}),window.pathfinderModulesReady=!0,f(i.PF_READY),window.dispatchEvent(new CustomEvent("PathfinderModulesLoaded")),(0,U.i)(void 0),(0,j.E)(void 0),(0,G.pT)()}catch(e){g.Z.error("Cannot render modules",e),$.trackRootPathfinder({action:"viewable",label:"false"})}}))}w().then((function(){return(0,e.mG)(this,void 0,void 0,(function*(){g.Z.debug(`Booting Pathfinder #${v._u}`);const e=yield window.SilverSurferSDK.registerClient({name:"pathfinder",onReboot:()=>{!function(){const e=(0,P.fM)();g.Z.debug("Cleaning up previously rendered modules",A(e)),e.forEach(B),(0,P.T6)()}(),(0,b.Z)(W)}});window.pathfinderTracking=$,e?((0,P.gv)(e),g.Z.debug("Preloaded with token",e),(0,b.Z)(F)):(g.Z.error("Couldn't register with SilverSurfer, disabling Pathfinder"),function(e,o){n({category:(0,t._E)(`browser-client-alerting-${e}`),label:"pie-dpad-tech",action:"alert"})}("pf-failed-register-sdk"))}))})),f(i.PF_START)})()})();
//# sourceMappingURL=pathfinder.js.map