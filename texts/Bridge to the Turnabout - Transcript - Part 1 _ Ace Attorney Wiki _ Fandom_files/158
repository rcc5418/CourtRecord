(()=>{var t={8709:()=>{!function(t,e){"use strict";t=t||"docReady",e=e||window;var n=[],i=!1,r=!1;function s(){if(!i){i=!0;for(var t=0;t<n.length;t++)n[t].fn.call(window,n[t].ctx);n=[]}}function a(){"complete"===document.readyState&&s()}e[t]=function(t,e){if("function"!=typeof t)throw new TypeError("callback for docReady(fn) must be a function");i?setTimeout((function(){t(e)}),1):(n.push({fn:t,ctx:e}),"complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(s,1):r||(document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):(document.attachEvent("onreadystatechange",a),window.attachEvent("onload",s)),r=!0))}}("docReady",window)},8249:function(t,e,n){var i;t.exports=(i=i||function(t,e){var i;if("undefined"!=typeof window&&window.crypto&&(i=window.crypto),"undefined"!=typeof self&&self.crypto&&(i=self.crypto),"undefined"!=typeof globalThis&&globalThis.crypto&&(i=globalThis.crypto),!i&&"undefined"!=typeof window&&window.msCrypto&&(i=window.msCrypto),!i&&void 0!==n.g&&n.g.crypto&&(i=n.g.crypto),!i)try{i=n(2480)}catch(t){}var r=function(){if(i){if("function"==typeof i.getRandomValues)try{return i.getRandomValues(new Uint32Array(1))[0]}catch(t){}if("function"==typeof i.randomBytes)try{return i.randomBytes(4).readInt32LE()}catch(t){}}throw new Error("Native crypto module could not be used to get secure random number.")},s=Object.create||function(){function t(){}return function(e){var n;return t.prototype=e,n=new t,t.prototype=null,n}}(),a={},o=a.lib={},d=o.Base={extend:function(t){var e=s(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},c=o.WordArray=d.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=null!=e?e:4*t.length},toString:function(t){return(t||h).stringify(this)},concat:function(t){var e=this.words,n=t.words,i=this.sigBytes,r=t.sigBytes;if(this.clamp(),i%4)for(var s=0;s<r;s++){var a=n[s>>>2]>>>24-s%4*8&255;e[i+s>>>2]|=a<<24-(i+s)%4*8}else for(var o=0;o<r;o+=4)e[i+o>>>2]=n[o>>>2];return this.sigBytes+=r,this},clamp:function(){var e=this.words,n=this.sigBytes;e[n>>>2]&=4294967295<<32-n%4*8,e.length=t.ceil(n/4)},clone:function(){var t=d.clone.call(this);return t.words=this.words.slice(0),t},random:function(t){for(var e=[],n=0;n<t;n+=4)e.push(r());return new c.init(e,t)}}),u=a.enc={},h=u.Hex={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var s=e[r>>>2]>>>24-r%4*8&255;i.push((s>>>4).toString(16)),i.push((15&s).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n[i>>>3]|=parseInt(t.substr(i,2),16)<<24-i%8*4;return new c.init(n,e/2)}},l=u.Latin1={stringify:function(t){for(var e=t.words,n=t.sigBytes,i=[],r=0;r<n;r++){var s=e[r>>>2]>>>24-r%4*8&255;i.push(String.fromCharCode(s))}return i.join("")},parse:function(t){for(var e=t.length,n=[],i=0;i<e;i++)n[i>>>2]|=(255&t.charCodeAt(i))<<24-i%4*8;return new c.init(n,e)}},p=u.Utf8={stringify:function(t){try{return decodeURIComponent(escape(l.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return l.parse(unescape(encodeURIComponent(t)))}},g=o.BufferedBlockAlgorithm=d.extend({reset:function(){this._data=new c.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=p.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var n,i=this._data,r=i.words,s=i.sigBytes,a=this.blockSize,o=s/(4*a),d=(o=e?t.ceil(o):t.max((0|o)-this._minBufferSize,0))*a,u=t.min(4*d,s);if(d){for(var h=0;h<d;h+=a)this._doProcessBlock(r,h);n=r.splice(0,d),i.sigBytes-=u}return new c.init(n,u)},clone:function(){var t=d.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),f=(o.Hasher=g.extend({cfg:d.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){g.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,n){return new t.init(n).finalize(e)}},_createHmacHelper:function(t){return function(e,n){return new f.HMAC.init(t,n).finalize(e)}}}),a.algo={});return a}(Math),i)},2153:function(t,e,n){var i;t.exports=(i=n(8249),function(t){var e=i,n=e.lib,r=n.WordArray,s=n.Hasher,a=e.algo,o=[],d=[];!function(){function e(e){for(var n=t.sqrt(e),i=2;i<=n;i++)if(!(e%i))return!1;return!0}function n(t){return 4294967296*(t-(0|t))|0}for(var i=2,r=0;r<64;)e(i)&&(r<8&&(o[r]=n(t.pow(i,.5))),d[r]=n(t.pow(i,1/3)),r++),i++}();var c=[],u=a.SHA256=s.extend({_doReset:function(){this._hash=new r.init(o.slice(0))},_doProcessBlock:function(t,e){for(var n=this._hash.words,i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],u=n[5],h=n[6],l=n[7],p=0;p<64;p++){if(p<16)c[p]=0|t[e+p];else{var g=c[p-15],f=(g<<25|g>>>7)^(g<<14|g>>>18)^g>>>3,v=c[p-2],w=(v<<15|v>>>17)^(v<<13|v>>>19)^v>>>10;c[p]=f+c[p-7]+w+c[p-16]}var m=i&r^i&s^r&s,y=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),b=l+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&u^~o&h)+d[p]+c[p];l=h,h=u,u=o,o=a+b|0,a=s,s=r,r=i,i=b+(y+m)|0}n[0]=n[0]+i|0,n[1]=n[1]+r|0,n[2]=n[2]+s|0,n[3]=n[3]+a|0,n[4]=n[4]+o|0,n[5]=n[5]+u|0,n[6]=n[6]+h|0,n[7]=n[7]+l|0},_doFinalize:function(){var e=this._data,n=e.words,i=8*this._nDataBytes,r=8*e.sigBytes;return n[r>>>5]|=128<<24-r%32,n[14+(r+64>>>9<<4)]=t.floor(i/4294967296),n[15+(r+64>>>9<<4)]=i,e.sigBytes=4*n.length,this._process(),this._hash},clone:function(){var t=s.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA256=s._createHelper(u),e.HmacSHA256=s._createHmacHelper(u)}(Math),i.SHA256)},2480:()=>{}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(e,n,i){return r=function(e,n){if("object"!=t(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n),(n="symbol"==t(r)?r:String(r))in e?Object.defineProperty(e,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[n]=i,e;var r}var i=n(2153),r=n.n(i);const s=document,a=(t,e)=>{const n=s.createElement("img");return n.height=1,n.width=1,n.style.display="none",n.src=t,n.onload=e,n.alt="",s.body.appendChild(n)},o=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=s.createElement("script");return n.type="text/javascript",n.src=t,n.async=e,s.body.appendChild(n)},d=t=>{let e="_au_"+t+"=",n=decodeURIComponent(document.cookie).split(";");for(let t=0;t<n.length;t++){let i=n[t];for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return null},c=(t,e,n)=>(parseInt(d(t))||0)+e<n,u=(t,e)=>{document.cookie="_au_"+t+"="+e+"; domain="+(t=>{let e=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,n=t.split("."),i=n[n.length-1];(i.length>4||"com"===i||"org"===i||"net"===i)&&(e=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i);let r=t.match(e);return r?r[0]:t})(document.location.hostname)+"; path=/; max-age=31536000"};function h(t){let e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZ".split("");t||(t=Math.floor(Math.random()*e.length));let n="";for(let i=0;i<t;i++)n+=e[Math.floor(Math.random()*e.length)];return n}const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";class p{constructor(t){this.pixels=t,this.parameters={sku:"",orderId:"",qty:"",revenue:"",ltv:""}}dropPixel(t,e){const n=this.pixels[t]||[];let i=this.parameters;e&&Object.keys(e).forEach((t=>(i[t]=e[t],!1))),n.forEach((t=>{let e=t,n="img";return"string"!=typeof t&&(e=t[0],n=t[1],n||(n="img")),e=e.replace(/\[\[SKU\]\]/g,i.sku),e=e.replace(/\[\[ORDERID\]\]/g,i.orderId),e=e.replace(/\[\[QTY\]\]/g,i.qty),e=e.replace(/\[\[REVENUE\]\]/g,i.revenue),e=e.replace(/\[\[LTV\]\]/g,i.ltv),e=e.replace(/\[\[ITEMS\]\]/g,(i.items||[]).map((t=>t.id||"")).join(",")),"img"===n?a(e):"script"===n?o(e):"iframe"===n&&(t=>{const e=s.createElement("iframe");return e.width=1,e.height=1,e.style.display="none",e.src=t,s.body.appendChild(e)})(e)}))}}const g="auPassiveTagger",f="G-FVWZ0RM4DH",v="1853083501571805",w="https://a.ad.gt",m="https://p.ad.gt",y="https://seg.ad.gt";class b{constructor(t,e){this.partnerId=t,this.taggerId=e,window.aupixels?this.pixels=window.aupixels.ec||{}:this.pixels={},this.ECPixels=new p(this.pixels),this.pageLoadRun=[],window.Adgt||(window.Adgt={}),window.Adgt.VarWatch=function(t,e,n){let i=t[e];return function(){if(t[e]!=i){const r=i;i=t[e],n(r,i)}}},window.Adgt.VarHandler=function(t,e){window.au.push({category:"DispatchEvent",eventName:"ProductMetaUpdated"}),clearInterval(window.Adgt.variantInterval)},window.Adgt.SetVarInterval=function(t,e){window.Adgt.variantInterval=setInterval(window.Adgt.VarWatch(t,e,window.Adgt.VarHandler),100)},window.Adgt.Store=this}pathIncludes(t){return-1!==window.location.pathname.indexOf(t)}updatePixels(){this.pixels=window.aupixels.ec||{},this.ECPixels=new p(this.pixels),this.pageLoadRun.forEach((t=>{let e={};"add"===t||"view"===t?e={sku:this.product.id}:"checkout"===t?e={qty:this.qty,revenue:this.revenue}:"transaction"===t&&(e={qty:this.transaction.items.length||this.qty,revenue:this.transaction.revenue||this.revenue,orderId:this.transaction.id}),this.ECPixels.dropPixel(t,e)})),this.pageLoadRun=[]}appendPageLoadPixelCheck(t){this.pageLoadRun.filter((e=>e===t)).length||this.pageLoadRun.push(t)}setClassProducts(t){this.products=t,this.qty=t.length,this.revenue=t.reduce(((t,e)=>t+parseFloat(e.price)),0)}sendAddProductEventToGA(t){this.product=t;try{this.sendAddProductToGA(t),ga(`${g}.ec:setAction`,"add"),ga(`${g}.send`,"event","UX","click","add to cart"),this.ECPixels.dropPixel("add",{sku:t.id,revenue:t.price.toFixed(2)})}catch(t){console.error(t)}}sendViewProductEventToGA(t){this.product=t;try{ga(`${g}.ec:addImpression`,{id:t.id,name:t.name,price:t.price,brand:t.brand}),ga(`${g}.ec:setAction`,"detail"),ga(`${g}.send`,"pageview"),this.ECPixels.dropPixel("view",{sku:t.id})}catch(t){console.error(t)}}sendAllProductsInCartToGA(t,e){this.setClassProducts(t);try{for(let e=0;e<t.length;e++){const n=t[e];this.sendAddProductToGA(n)}return e(),!0}catch(t){return!1}}sendCheckoutEventToGA(){try{ga(`${g}.ec:setAction`,"checkout",{step:1}),ga(`${g}.send`,"event",{eventCategory:"Checkout",eventAction:"checkout",hitCallback:()=>{}}),this.ECPixels.dropPixel("checkout",{qty:this.qty,revenue:this.revenue})}catch(t){console.error(t)}}sendAllProductsInTransactionToGA(t,e){this.setClassProducts(t);try{for(let e=0;e<t.length;e++){const n=t[e];this.sendAddProductToGA(n)}return e(),!0}catch(t){return!1}}sendAddProductToGA(t){ga(`${g}.ec:addProduct`,{id:t.id,name:t.name,brand:t.brand,price:t.price,quantity:t.quantity||1})}sendTransactionEventToGA(t){this.transaction=t;try{ga(`${g}.ec:setAction`,"purchase",{id:t.id,affiliation:t.affiliation,revenue:t.revenue,tax:t.tax,shipping:t.shipping}),ga(`${g}.send`,"pageview"),this.ECPixels.dropPixel("transaction",{qty:(t.items||[]).length||this.qty,revenue:t.revenue||this.revenue,orderId:t.id,items:t.items||[],ltv:t.ltv||""})}catch(t){console.error(t)}}profilerServiceRequest(t){window.au.push({category:"sendUserBehaviour",action:JSON.stringify(t)})}sendErrorToSentry(){return!1}}const S=class extends b{constructor(t,e){super(t,e),this.brand=window.Shopify.shop}captureProduct(t){try{const e=window.ShopifyAnalytics.meta.selectedVariantId;let n=window.ShopifyAnalytics.meta.product.variants[0];return t?n=window.ShopifyAnalytics.meta.product.variants.find((function(e){return e.public_title===t})):e&&(n=window.ShopifyAnalytics.meta.product.variants.find((function(t){return t.id.toString()===e.toString()}))),n||(n=window.ShopifyAnalytics.meta.product.variants[0],n.id=window.ShopifyAnalytics.meta.product.id),{id:`${n.id}-${this.taggerId}`,name:n.name,price:parseInt(n.price,10)/100,brand:this.brand}}catch(t){return console.error(t),null}}sendProductEvents(){const t=this.captureProduct();if(t){this.sendViewProductEventToGA(t),this.appendPageLoadPixelCheck("view");const e=document.querySelector('button[name="add"]')||document.querySelector("form#add-item-form button")||document.querySelector("button.shopify_add_to_cart")||document.querySelector('input[name="add"]')||document.querySelector(".ProductForm__AddToCart")||document.querySelector("#AddToCart")||document.querySelector('.product-add input[type="submit"]');e&&window.au.push({category:"ListenerAttacher",input:e,method:()=>{this.sendAddProductEventToGA(t),window.au.push({category:"behavior",action:"purchase-intent"});const e={event:"addToCart",data:t};this.profilerServiceRequest(e)}})}}captureCart(){try{const t=document.querySelector("#order-summary").querySelectorAll("tr.product"),e=[];for(let n=0;n<t.length;n++){const i=t[n],r=i.dataset.productId,s=i.querySelector(".product__description__name").textContent,a=parseFloat(i.querySelector(".product__price").textContent.replace(/[^0-9.]/g,"")),o=parseInt(i.querySelector(".product__quantity").textContent.replace(/\s+/g,""),10),d={id:`${r}-${this.taggerId}`,name:s,brand:this.brand,price:a,quantity:o};e.push(d)}return e}catch(t){return console.error(t),null}}calculateRevenue(t){let e=0;for(let n=0;n<t.length;n++)e+=parseFloat(t[n].price);return e}captureTransaction(){try{const t=window.Shopify.checkout,e=window.Shopify.shop,n=t.order_id,i=parseFloat(t.subtotal_price);let r=0;try{r=parseFloat(t.total_tax)}catch(t){console.error(t)}let s=0;if(t.shipping_rate)try{s=parseFloat(t.shipping_rate)}catch(e){try{s=parseFloat(t.shipping_rate.price)}catch(t){console.error(t)}}const a=this.formatProductsInTransaction(t.line_items);return{id:`${n}-${this.taggerId}`,affiliation:e,revenue:i,tax:r,shipping:s,items:a}}catch(t){return console.error(t),null}}formatProductsInTransaction(t){const e=t,n=[];for(let t=0;t<e.length;t++){const i=e[t],r={id:i.product_id,name:i.title,brand:this.brand,price:parseFloat(i.price),quantity:i.quantity};n.push(r)}return n}initialize(){const t=window.ShopifyAnalytics&&window.ShopifyAnalytics.meta&&window.ShopifyAnalytics.meta.product,e=window.Shopify.Checkout&&window.Shopify.Checkout.page&&"thank_you"!==window.Shopify.Checkout.page,n=window.Shopify.checkout,i=document.querySelectorAll("div.quickadd");if(i.length>0)for(let t=0;t<i.length;t++){const e=i[t],n=e.querySelector("button").dataset.cartAdd;let r=e.querySelector('[class$="item__title"]').textContent;if(e.querySelector(".js-option-value")){const t=e.querySelector(".js-option-value").textContent.split(": ");r+=t[t.length-1]}const s={id:n,name:r,price:parseFloat(e.querySelector(".product-price__price").textContent.replace(/[^0-9.]/g,"")),brand:this.brand};window.au.push({category:"ListenerAttacher",input:e,method:()=>{this.sendAddProductEventToGA(s);const t={event:"addToCart",data:s};window.au.push({category:"behavior",action:"purchase-intent"}),this.profilerServiceRequest(t)}})}if(t){this.sendProductEvents();const t=document.querySelectorAll(".swatch-element");if(t.length>0){window.addEventListener("ProductMetaUpdated",(()=>{this.sendProductEvents()}));for(let e=0;e<t.length;e++){const n=t[e];window.au.push({category:"ListenerAttacher",input:n,method:()=>{window.Adgt.SetVarInterval(window.ShopifyAnalytics.meta,"selectedVariantId")}})}}}if(e){const t=this.captureCart();t&&(window.au.push({category:"behavior",action:"checkout"}),this.appendPageLoadPixelCheck("checkout"),this.sendAllProductsInCartToGA(t,(()=>this.sendCheckoutEventToGA())))}if(n&&-1!==window.location.pathname.indexOf("thank_you")){const t=this.captureTransaction();if(t){const e=t.items;window.au.push({category:"behavior",action:"purchase-complete"}),this.appendPageLoadPixelCheck("transaction"),this.sendAllProductsInTransactionToGA(e,(()=>this.sendTransactionEventToGA(t)))}else this.transaction={id:`null-${this.taggerId}`,affiliation:this.brand,revenue:0,tax:0,shipping:0,items:[]},this.appendPageLoadPixelCheck("transaction")}}};class _{constructor(t,e){this.partnerId=t,this.dataStore=e,this.LAST_SEEN_TCF_KEY="last_seen_iab_tcf",this.LAST_SEEN_CUSTOM_KEY="last_seen_iab_custom",this.COOKIE_TTL=2592e6}SendToQueue(t){return c(this.LAST_SEEN_CUSTOM_KEY,this.COOKIE_TTL,1*new Date)&&(window.au.push({category:"sendConsent",consented:t,consentType:"custom"}),u(this.LAST_SEEN_CUSTOM_KEY,1*new Date)),ga(`${g}.send`,{hitType:"event",eventCategory:t?"user_consent":"user_nonconsent",eventAction:window.location.hostname}),!0}sendRequest(t){u(this.LAST_SEEN_TCF_KEY,1*new Date),window.au.push({category:"sendConsent",consented:t.vendor.consents[561]||!1,consentType:"gdpr",consentString:t.tcString})}WmgConsentListeners(){document.querySelectorAll("div.overlay, .ppclose, .ppclose2").forEach((t=>{t.addEventListener("click",(()=>this.SendToQueue(!0))),t.addEventListener("touchend",(()=>this.SendToQueue(!0)))}))}UproxxConsentListeners(){document.querySelectorAll(".qc-cmp-button").forEach((t=>{let e=!0;t.textContent.toLowerCase().includes("do not")&&(e=!1),t.addEventListener("click",(()=>this.SendToQueue(e))),t.addEventListener("touchend",(()=>this.SendToQueue(e)))}))}addConsentListeners(){"14"===String(this.partnerId)&&this.WmgConsentListeners(),"24"===String(this.partnerId)&&this.UproxxConsentListeners();try{__tcfapi("addEventListener",2,((t,e)=>{e&&("tcloaded"===t.eventStatus&&t.gdprApplies&&c(this.LAST_SEEN_TCF_KEY,this.COOKIE_TTL,1*new Date)&&this.sendRequest(t),"useractioncomplete"===t.eventStatus&&t.gdprApplies&&this.sendRequest(t))}))}catch(t){return!1}return!1}}const A=class{constructor(t){this.w=t,this.now=1*new Date,this.useCookie=!function(t){var e="au/test";try{return t.localStorage.setItem(e,e),t.localStorage.removeItem(e),!0}catch(t){return!1}}(this.w)}getCookie(t){return d(t)}get(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.useCookie||e)return this.getCookie(t);let n=this.w.localStorage.getItem("au/"+t);if(n){if(n=JSON.parse(n),n.e>this.now)return n.v;this.w.localStorage.removeItem("au/"+t)}return null}setCookie(t,e){u(t,e)}set(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6e4,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.useCookie||i?this.setCookie(t,e,n):this.w.localStorage.setItem("au/"+t,JSON.stringify({v:e,e:this.now+n}))}};class E{constructor(t,e,n){this.w=t,this.d=e,this.auvars=n,this.dataStore=this.dataStore}_callAdInterestGroupIframe(t,e){const n=this.d.createElement("iframe");n.style.display="none";const i=btoa(JSON.stringify(e));n.src=`https://proton.ad.gt/join-ad-interest-groups.html?evid=${t}&igs=${i}`,n.allow="join-ad-interest-group; attribution-reporting",document.body.appendChild(n)}_sendEventToBackend(t,e){this.w.au.push({partnerId:this.p,category:"sendEvent",event:{type:"join_ad_interest_group",interest_groups:t,event_id:e}})}joinAdInterestGroups(t){let e=new XMLHttpRequest;const n=new URL(`${y}/api/v1/igs`);n.searchParams.append("hostname",t),n.searchParams.append("pid",this.auvars.p),null!=this.auvars.t&&n.searchParams.append("tid",this.auvars.t);let i=this;return e.onload=function(){if(e.readyState==XMLHttpRequest.DONE&&200==e.status){const t=JSON.parse(e.response).sort();if(t.length>0){const e=h(8);i._callAdInterestGroupIframe(e,t),i._sendEventToBackend(t,e)}}},e.open("GET",n,!0),e.setRequestHeader("Content-type","application/json"),e.send(),[]}}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function T(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?C(Object(i),!0).forEach((function(n){e(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}const P=window,I=document,O={"og:title":"title","og:description":"description","og:image":"image","og:url":"url","og:type":"type","og:name":"name","og:locale":"locale"},L={keywords:"keywords"},j=class{constructor(t){e(this,"ListenerIterator",((t,e)=>{Array.prototype.forEach.call(this.d.querySelectorAll(t),(t=>{this.ListenerAttacher({input:t,method:e})}))})),e(this,"ListenerAttacher",(t=>{const{input:e,method:n}=t;null!=e&&(e.addEventListener?e.addEventListener("mousedown",n):e.attachEvent&&e.attachEvent("mousedown",n))})),e(this,"GlobalListenerHandler",(t=>{this.GlobalHandlers[t.type].forEach((e=>{if(t.target.matches(e.selector))e.method(t);else{let n=t.target,i=!1;for(;n.parentElement&&!i;)n=n.parentElement,i=n.matches(e.selector),i&&e.method(T(T({},t),{},{target:n}))}}))})),e(this,"GlobalListenerAttacher",((t,e,n)=>{"string"==typeof t&&(t=[t]),t.forEach((t=>{this.GlobalHandlers[t]=this.GlobalHandlers[t]||[],this.GlobalHandlers[t].push({selector:e,method:n}),document.addEventListener?(document.removeEventListener(t,window.au.l),document.addEventListener(t,window.au.l)):document.attachEvent&&(document.detachEvent(t,window.au.l),document.attachEvent(t,window.au.l))}))})),e(this,"clickHandler",(t=>{let e=t.currentTarget.getAttribute("href");null!==e&&this.include_internal_links.includes(window.location.hostname)&&window.au.push({category:"sendSPAPageView",url:e})})),e(this,"sendEvent",(t=>{let{event:e,events:n,type:i}=t;if(e=e||n,!e){if(!i)return null;e=T({},t),delete e.category,delete e.partnerId}const r={tagger_id:this.auvars.t,partner_id:this.auvars.p,audigent_id:this.auvars.a,events:Array.isArray(e)?e:[e]};let s=new XMLHttpRequest,a=`${m}/api/v1/event`;return s.open("POST",a,!0),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify(r)),""})),e(this,"sendGAEvent",(t=>{const{eventCategory:e,eventAction:n,eventLabel:i,skipSQS:r}=t;ga(`${g}.send`,{hitType:"event",eventCategory:e,eventAction:n,eventLabel:i}),r||window.au.push({category:"sendEvent",event:{type:e,eventAction:n,eventLabel:i}})})),e(this,"sendConsent",(t=>{const e={audigent_id:this.auvars.a,tagger_id:this.auvars.t,partner_id:this.auvars.p,consented:t.consented,consent_type:t.consentType,consent_string:t.consentString};let n=new XMLHttpRequest,i=`${m}/api/v1/con`;return n.open("POST",i,!0),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(e)),""})),e(this,"pixels",(()=>{const t=`https://pixels.ad.gt/api/v1/getpixels?tagger_id=${this.auvars.t}&url=${encodeURIComponent(this.u.href)}&code='none'`;o(t,!0)})),e(this,"setupConsentHandler",(()=>{this.consentHandler.addConsentListeners()})),e(this,"sendSPAPageView",(t=>{let{url:e}=t;if(e){e.startsWith("//")&&(e="http://"+e),!e.startsWith("/")&&e.includes("://")||(e=this.d.location.protocol+"//"+this.d.location.host+(e.startsWith("/")?"":"/")+e);try{let t=new URL(e);t.host===this.d.location.host&&(this.sendOffsiteClick(t.href),ga(`${g}.send`,"pageview",t.pathname+t.hash))}catch(t){}}})),e(this,"beopEvent",(t=>{const e=t.partnerId||this.auvars.p;this.sendEvent({event:T(T({},t.data||{}),{},{partner_id:e,type:"beop"})})})),e(this,"trackEvent",(t=>!1)),e(this,"DispatchEvent",(t=>{const{eventName:e}=t,n=(t=>{if("function"==typeof window.CustomEvent)return new CustomEvent(t);const e=!1,n=!1,i=void 0,r=document.createEvent("CustomEvent");return r.initCustomEvent(t,e,n,i),r})(e);window.dispatchEvent(n)})),e(this,"optout",(()=>{a(`https://ids.ad.gt/api/v1/optout?au_id=${this.auvars.a}`)}));const{auvars:n,decoratorTarget:i,taggerStrategy:r}=t||{};this.w=P,this.u=P.location,this.d=I,this.auvars=n,this.dataStore=new A(P),this.customOptions={},this.customTags=[],this.customAttributes={},this.userDefinedTags=[],this.userDefinedAttributes={},this.GlobalHandlers={},this.randNum=Math.random(),this.decoratorTarget=i||.995,this.u.hostname.toLowerCase().endsWith("lnk.to")?this.taggerStrategy="FULL_PATH":this.taggerStrategy=r||this.auvars.tgs||"NONE",this.consentHandler=new _(this.auvars.p,this.dataStore),this.getPrivacySandboxFeatures(),this.protectedAudienceHandler=new E(this.w,this.d,this.auvars,this.dataStore),this.setupSessionId(),this.setupHadron(),this.setupGA(),this.facebook()}valueOf(){return null}docReady(){if(!1!==this.customOptions.autoPageView&&this.sendPageView(),this.setupConsentHandler(),this.ListenerIterator("a",this.clickHandler),this.include_internal_links=[],P.addEventListener("hashchange",(()=>{this.sendSPAPageView({url:this.u.href}),this.pixels()})),window.Shopify){const t=new S(this.auvars.p,this.auvars.t);t.initialize(),window.addEventListener("aupixels",(()=>{t.updatePixels()}))}this.privacySandboxFeatures.includes("JI")&&this.protectedAudienceHandler.joinAdInterestGroups(this.u.hostname)}clearOptions(){this.customOptions={}}setOptions(t){const{options:e}=t||{};return"object"==typeof e&&(this.customOptions=T(T({},this.customOptions),e),!0)}observeDom(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{childList:!0};const i=window.MutationObserver||window.WebKitMutationObserver;if(t&&1===t.nodeType){if(i){const r=new i(e);return r.observe(t,n),r}window.addEventListener&&(t.addEventListener("DOMNodeInserted",e,!1),t.addEventListener("DOMNodeRemoved",e,!1))}}facebook(){return!0===this.auvars.fbq&&(t=window,e=document,n="script",t.fbq||(i=t.fbq=function(){i.callMethod?i.callMethod.apply(i,arguments):i.queue.push(arguments)},t._fbq||(t._fbq=i),i.push=i,i.loaded=!0,i.version="2.0",i.queue=[],(r=e.createElement(n)).async=!0,r.src="https://connect.facebook.net/en_US/fbevents.js",(s=e.getElementsByTagName(n)[0]).parentNode.insertBefore(r,s)),fbq("init",v),!0);var t,e,n,i,r,s}push(t,e,n){if("string"==typeof t)return e&&e!==this.auvars.p?(console.warn("[Audigent] skip .push("+t+"), p is not a match"),!1):(console.warn('[Audigent] deprecated use of "push": please use .push( object )'),(this[t]||(()=>!1)).call(this,n),!0);if(t&&"object"==typeof t){const{fn:e,category:n,partnerId:i}=t,r=e||n;if(i&&i!==this.auvars.p)return console.warn("[Audigent] skip .push("+r+"), partnerId is not a match"),!1;if(e){const e=t.args;return Array.isArray(e)?(e.map((t=>(this[r]||(()=>!1)).call(this,t))),!0):((this[r]||(()=>!1)).call(this,e),!0)}return(this[r]||(()=>!1)).call(this,t),!0}return console.warn("[Audigent] could not execute the required command: please check your syntax"),!1}setupHadron(){!0===(this.w.hadron||{loaded:!1}).loaded?this.auvars.h=this.w.hadron.id:this.auvars.h=null}getAudigentId(t){if(t instanceof Function)return t(this.auvars.a),this.auvars.a;const{callback:e}=t||{};return e instanceof Function&&e(this.auvars.a),this.auvars.a}setupSessionId(){let t=this.dataStore.get("sid");null==t&&(t=function(){const t=Math.round(Date.now()/1e3);return"AU1S-0100-"+String(t).padStart(12,"0")+"-"+h(8)+"-"+h(4)}()),this.auvars.s=t,this.dataStore.set("sid",t,18e5)}getTaggerComponents(){return null}setupTaggerId(){const t=this.u.hostname.toLowerCase(),e=this.getTags();let n=this.getTaggerComponents();Array.isArray(n)&&n.length>0||(n="FULL_PATH"==this.taggerStrategy?[t,this.u.pathname,this.auvars.p]:Array.isArray(e)&&e.length>0?[t,"["+e.join(",").toLowerCase()+"]",this.auvars.p]:[t,"/",this.auvars.p]);const i=function(t){function e(t,e){var n,i,r,s,a;return r=2147483648&t,s=2147483648&e,a=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(i=1073741824&e)?2147483648^a^r^s:n|i?1073741824&a?3221225472^a^r^s:1073741824^a^r^s:a^r^s}function n(t,n,i,r,s,a,o){return t=e(t,e(e(n&i|~n&r,s),o)),e(t<<a|t>>>32-a,n)}function i(t,n,i,r,s,a,o){return t=e(t,e(e(n&r|i&~r,s),o)),e(t<<a|t>>>32-a,n)}function r(t,n,i,r,s,a,o){return t=e(t,e(e(n^i^r,s),o)),e(t<<a|t>>>32-a,n)}function s(t,n,i,r,s,a,o){return t=e(t,e(e(i^(n|~r),s),o)),e(t<<a|t>>>32-a,n)}function a(t){var e,n="",i="";for(e=0;3>=e;e++)n+=(i="0"+(i=t>>>8*e&255).toString(16)).substr(i.length-2,2);return n}var o,d,c,u,h,l,p,g,f;for(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);128>i?e+=String.fromCharCode(i):(127<i&&2048>i?e+=String.fromCharCode(i>>6|192):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128)),e+=String.fromCharCode(63&i|128))}return e}(t),o=function(t){for(var e,n=t.length,i=16*(((e=n+8)-e%64)/64+1),r=Array(i-1),s=0,a=0;a<n;)s=a%4*8,r[e=(a-a%4)/4]|=t.charCodeAt(a)<<s,a++;return r[e=(a-a%4)/4]|=128<<a%4*8,r[i-2]=n<<3,r[i-1]=n>>>29,r}(t),l=1732584193,p=4023233417,g=2562383102,f=271733878,t=0;t<o.length;t+=16)d=l,c=p,u=g,h=f,l=n(l,p,g,f,o[t+0],7,3614090360),f=n(f,l,p,g,o[t+1],12,3905402710),g=n(g,f,l,p,o[t+2],17,606105819),p=n(p,g,f,l,o[t+3],22,3250441966),l=n(l,p,g,f,o[t+4],7,4118548399),f=n(f,l,p,g,o[t+5],12,1200080426),g=n(g,f,l,p,o[t+6],17,2821735955),p=n(p,g,f,l,o[t+7],22,4249261313),l=n(l,p,g,f,o[t+8],7,1770035416),f=n(f,l,p,g,o[t+9],12,2336552879),g=n(g,f,l,p,o[t+10],17,4294925233),p=n(p,g,f,l,o[t+11],22,2304563134),l=n(l,p,g,f,o[t+12],7,1804603682),f=n(f,l,p,g,o[t+13],12,4254626195),g=n(g,f,l,p,o[t+14],17,2792965006),l=i(l,p=n(p,g,f,l,o[t+15],22,1236535329),g,f,o[t+1],5,4129170786),f=i(f,l,p,g,o[t+6],9,3225465664),g=i(g,f,l,p,o[t+11],14,643717713),p=i(p,g,f,l,o[t+0],20,3921069994),l=i(l,p,g,f,o[t+5],5,3593408605),f=i(f,l,p,g,o[t+10],9,38016083),g=i(g,f,l,p,o[t+15],14,3634488961),p=i(p,g,f,l,o[t+4],20,3889429448),l=i(l,p,g,f,o[t+9],5,568446438),f=i(f,l,p,g,o[t+14],9,3275163606),g=i(g,f,l,p,o[t+3],14,4107603335),p=i(p,g,f,l,o[t+8],20,1163531501),l=i(l,p,g,f,o[t+13],5,2850285829),f=i(f,l,p,g,o[t+2],9,4243563512),g=i(g,f,l,p,o[t+7],14,1735328473),l=r(l,p=i(p,g,f,l,o[t+12],20,2368359562),g,f,o[t+5],4,4294588738),f=r(f,l,p,g,o[t+8],11,2272392833),g=r(g,f,l,p,o[t+11],16,1839030562),p=r(p,g,f,l,o[t+14],23,4259657740),l=r(l,p,g,f,o[t+1],4,2763975236),f=r(f,l,p,g,o[t+4],11,1272893353),g=r(g,f,l,p,o[t+7],16,4139469664),p=r(p,g,f,l,o[t+10],23,3200236656),l=r(l,p,g,f,o[t+13],4,681279174),f=r(f,l,p,g,o[t+0],11,3936430074),g=r(g,f,l,p,o[t+3],16,3572445317),p=r(p,g,f,l,o[t+6],23,76029189),l=r(l,p,g,f,o[t+9],4,3654602809),f=r(f,l,p,g,o[t+12],11,3873151461),g=r(g,f,l,p,o[t+15],16,530742520),l=s(l,p=r(p,g,f,l,o[t+2],23,3299628645),g,f,o[t+0],6,4096336452),f=s(f,l,p,g,o[t+7],10,1126891415),g=s(g,f,l,p,o[t+14],15,2878612391),p=s(p,g,f,l,o[t+5],21,4237533241),l=s(l,p,g,f,o[t+12],6,1700485571),f=s(f,l,p,g,o[t+3],10,2399980690),g=s(g,f,l,p,o[t+10],15,4293915773),p=s(p,g,f,l,o[t+1],21,2240044497),l=s(l,p,g,f,o[t+8],6,1873313359),f=s(f,l,p,g,o[t+15],10,4264355552),g=s(g,f,l,p,o[t+6],15,2734768916),p=s(p,g,f,l,o[t+13],21,1309151649),l=s(l,p,g,f,o[t+4],6,4149444226),f=s(f,l,p,g,o[t+11],10,3174756917),g=s(g,f,l,p,o[t+2],15,718787259),p=s(p,g,f,l,o[t+9],21,3951481745),l=e(l,d),p=e(p,c),g=e(g,u),f=e(f,h);return(a(l)+a(p)+a(g)+a(f)).toLowerCase()}(n.join("")).toLowerCase();return this.auvars.t=i,this.dataStore.set("tid",i,36e5),i}getMetaAttributes(){const t=this.d.querySelectorAll("meta");let e={url:this.u.href,title:this.d.title};for(const n of t){const t=n.getAttribute("property");if(t in O){e[O[t]]=n.getAttribute("content");continue}const i=n.getAttribute("name");if(i in L){const t=L[i];e[t]="keywords"===t?(n.getAttribute("content")||"").split(",").map((t=>t.trim())).filter((t=>t.length>0)):n.getAttribute("content")}}return e}getCustomAttributes(){return{}}getAttributes(){return T(T(T(T({},this.customAttributes),this.userDefinedAttributes),this.getCustomAttributes()),this.getMetaAttributes())}clearAttributes(){this.userDefinedAttributes={}}setAttributes(t){const{attributes:e}=t||{};return"object"==typeof e&&(this.userDefinedAttributes=e,!0)}addAttributes(t){const{attributes:e}=t||{};return"object"==typeof e&&(this.userDefinedAttributes=T(T({},this.userDefinedAttributes),e),!0)}getMetaTags(){const t=document.head.querySelectorAll("meta[name='audigent:tags']")[0];return t?t.content.split("|").map((t=>t.trim())).filter((t=>t.length>0)).map((t=>(this.u.hostname+" > "+t).toUpperCase())):[]}getCustomTags(){return[]}getTags(){return[...this.customTags,...this.userDefinedTags,...this.getCustomTags(),...this.getMetaTags()].filter((t=>"string"==typeof t||t instanceof String)).map((t=>t.replace(/,/g,""))).map((t=>t.trim())).filter((t=>t.length>0)).map((t=>t.toUpperCase()))}clearTags(){this.userDefinedTags=[]}setTags(t){const{tags:e}=t||{};return Array.isArray(e)?(this.userDefinedTags=e,!0):"string"==typeof e&&(this.userDefinedTags=[e],!0)}addTags(t){const{tags:e}=t||{};return Array.isArray(e)?(this.userDefinedTags=[...e,...this.userDefinedTags],!0):"string"==typeof e&&(this.userDefinedTags=[e,...this.userDefinedTags],!0)}writeDecoratorRecord(t){const{tags:e,decor_dict:n,attributes:i}=t;this.customTags=[...this.customTags,...e||[]],this.customAttributes=T(T(T({},this.customAttributes),n||{}),i||{})}sendDecoratorRecord(){if(!(this.randNum>=this.decoratorTarget))return null;const t=this.getAttributes(),e=this.getTags(),n=T(T({},t),{},{tags:e.join(),tagger_id:this.auvars.t,partner_id:this.auvars.p});let i=new XMLHttpRequest,r=`${m}/api/v1/dec`;return i.open("POST",r,!0),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(n)),i}setupGA(){var t,e,n,i,r,s;P.ga||(e=I,n="script",i="ga",(t=P).GoogleAnalyticsObject=i,t[i]=t[i]||function(){(t[i].q=t[i].q||[]).push(arguments)},t[i].l=1*new Date,r=e.createElement(n),s=e.getElementsByTagName(n)[0],r.async=1,r.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(r,s)),ga("create","UA-87198801-1","auto",g),ga(`${g}.require`,"ecommerce"),ga(`${g}.require`,"ec"),ga(`${g}.set`,"anonymizeIp",!0),ga(`${g}.set`,"dimension1",this.auvars.a),ga(`${g}.set`,"dimension2","none"),ga(`${g}.set`,"dimension3",this.auvars.p),ga(`${g}.set`,"dimension4",this.u.hostname),ga(`${g}.set`,"dimension5",this.u.pathname),ga(`${g}.set`,"dimension6","Passive Tagger"),!0===this.hasGA4()&&this.setupGA4()}hasGA4(){return!0===this.auvars.ga4}setupGA4(){try{var t=document.createElement("script");t.src="https://www.googletagmanager.com/gtag/js?id="+f+"&l=audDataLayer",t.async=!0,document.head.appendChild(t),"function"!=typeof P.audGtag&&(P.audDataLayer=P.audDataLayer||[],P.audGtag=function(){P.audDataLayer.push(arguments)}),audGtag("js",new Date),audGtag("config",f,{user_id:this.auvars.a,dimension3:this.auvars.p,dimension4:this.u.hostname,dimension5:this.u.pathname,groups:"audigent",send_page_view:!1}),this.auvars.ga4=!0}catch(t){console.error(t)}}sendOffsiteClick(t){const{url:e}=t;a(`${w}/api/v1/off-site-click/${this.auvars.p}?tagger_id=${this.auvars.t}&url=${e}`)}sendUserBehaviour(t){const{action:e}=t,n={click_url:e,tagger_id:this.auvars.t,audigent_id:this.auvars.a,partner_id:this.auvars.p},i=new Blob([JSON.stringify(n)],{type:"application/json"});this.w.navigator.sendBeacon(`${m}/api/v1/ubh`,i)}behavior(t){const e=encodeURIComponent(`${this.u.protocol}//${this.u.hostname}${this.u.pathname}__audigent-behavior-${t.action}${this.u.search}${this.u.hash}`);this.sendOffsiteClick({url:e}),this.sendGAEvent({eventCategory:"audigent-behavior",eventAction:t.action,eventLabel:this.auvars.t})}segCapture(){const{au_seg:t}=window,e=(t||{}).segments||[];if((e.length>0||"584"==this.auvars.p)&&this.randNum>=.9){const t={tagger_id:this.auvars.t,partner_id:this.auvars.p,audigent_id:this.auvars.a,segment_ids:e.length>0?e.join("|"):null};let n=new XMLHttpRequest,i=`${m}/api/v1/segs`;return n.open("POST",i,!0),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(t)),!0}return!1}tags(t){console.warn("[Audigent] this method is deprecated (params: "+JSON.stringify(t)+"). Use addTags/setTags/clearTags instead. Please contact your account manager for more info.");const e=(t.action||t.data||[]).map((t=>t.toUpperCase()));this.push({category:"addTags",tags:e})}conversion(t){console.log(`[Audigent] Conversion Event - ${t.action}`)}sendPageView(t){this.randNum=Math.random();const e=this.setupTaggerId(),n=1*new Date,i={event_timestamp:n,url:this.w.location.href,referrer:this.d.referrer,partner_id:this.auvars.p,tagger_id:this.auvars.t,audigent_id:this.auvars.a,session_id:this.auvars.s,p_s_f:this.privacySandboxFeatures};this.auvars.h&&(i.hadron_id=this.auvars.h);const r=(t||{}).data||{},s={category:"pageView",version:"v2",created_at:n,properties:T(T({},i),r)};let a=new XMLHttpRequest,o=`${w}/api/v1/collect`;a.open("POST",o,!0),a.setRequestHeader("Content-type","text/plain"),a.send(function(t){var e,n,i,r,s,a,o,d="",c=0;for(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=String.fromCharCode(i):i>127&&i<2048?(e+=String.fromCharCode(i>>6|192),e+=String.fromCharCode(63&i|128)):(e+=String.fromCharCode(i>>12|224),e+=String.fromCharCode(i>>6&63|128),e+=String.fromCharCode(63&i|128))}return e}(t);c<t.length;)r=(e=t.charCodeAt(c++))>>2,s=(3&e)<<4|(n=t.charCodeAt(c++))>>4,a=(15&n)<<2|(i=t.charCodeAt(c++))>>6,o=63&i,isNaN(n)?a=o=64:isNaN(i)&&(o=64),d=d+l.charAt(r)+l.charAt(s)+l.charAt(a)+l.charAt(o);return d}(JSON.stringify(s))),this.pixels(),this.sendDecoratorRecord(),ga(`${g}.set`,"dimension7",e),!0===this.hasGA4()&&audGtag("set",{dimension7:e,send_to:f}),(this.randNum>=.95||["158"].includes(this.auvars.p.toString())&&this.randNum>=.8||["220"].includes(this.auvars.p.toString())&&this.randNum>=.5)&&(ga(`${g}.send`,"pageview"),!0===this.hasGA4()&&audGtag("event","page_view",{dimension7:e,send_to:f})),!0===this.auvars.fbq&&fbq("trackSingle",v,"PageView",{partner_id:this.auvars.p,tagger_id:this.auvars.t})}setupInPageTaxonomy(t){let e=new URL(`${y}/api/v1/segments`);if(e.searchParams.set("url",encodeURIComponent(this.u.href)),e.searchParams.set("partner_id",this.auvars.p),void 0!==this.auvars.t)e.searchParams.set("tagger_id",this.auvars.t);else{const t=this.setupTaggerId();e.searchParams.set("tagger_id",t)}e.searchParams.set("au_id",this.auvars.a);let n=new XMLHttpRequest;n.timeout=1e4,n.onload=function(){if(n.readyState==XMLHttpRequest.DONE&&200==n.status){const i=JSON.parse(n.response);P.au_seg=i,(t||[]).forEach((t=>t(P,I,i.segments)));var e=new CustomEvent("auSegReady",{detail:i});I.dispatchEvent(e),P.au.push({category:"segCapture"})}},n.ontimeout=function(){console.log("[Audigent] Taxonomy Service > Timeout")},n.onerror=function(){console.log("[Audigent] Taxonomy Service > Invalid Response")},n.open("GET",e,!0),n.send()}addUserIdentity(t){if(!t)return!1;const{identityType:e,identityValue:n}=t;if(void 0===e||void 0===n)return!1;if("email"===e){const t=window.btoa(n);return this.sendEvent({event:{type:"e",value:t}})}return this.sendEvent({event:{type:"u",[e]:n,identityType:e,identityValue:n}})}addUserEmailAddress(t){if(!t)return!1;const{identityValue:e}=t;if(void 0===e)return!1;let n=e.toLowerCase().trim();if(n.endsWith("@gmail.com")){let t=n.split("@")[0];t=t.split("+")[0],t=t.replace(/\./g,""),n=t+"@gmail.com"}const i=r()(n).toString();return this.addUserIdentity({identityType:"hem_sha256",identityValue:i})}addUserProperty(t){if(!t)return!1;const{propertyName:e,propertyValue:n}=t;return void 0!==e&&void 0!==n&&("email"===e?this.addUserIdentity({identityType:"email",identityValue:n}):this.sendEvent({event:{type:"user.property",propertyName:e,propertyValue:n}}))}getPrivacySandboxFeatures(){this.privacySandboxFeatures=[];try{if(void 0===this.d.featurePolicy)return;"browsingTopics"in this.d&&this.d.featurePolicy.allowsFeature("browsing-topics")&&this.privacySandboxFeatures.push("BT"),"joinAdInterestGroup"in navigator&&this.d.featurePolicy.allowsFeature("join-ad-interest-group")&&this.privacySandboxFeatures.push("JI"),"runAdAuction"in navigator&&this.d.featurePolicy.allowsFeature("run-ad-auction")&&this.privacySandboxFeatures.push("RA"),this.d.featurePolicy.allowsFeature("attribution-reporting")&&this.privacySandboxFeatures.push("AR")}catch(t){console.error(t)}}};function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function q(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?x(Object(i),!0).forEach((function(n){e(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):x(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}const R=class{constructor(t,n,i){e(this,"lineItemsContain",(t=>this.lineItemIds.map((t=>t.toString())).includes((t||"").toString()))),e(this,"setJWPlayerListener",(()=>{window.jwplayer&&(window.jwplayer().on("adImpression",this.readJWPlayerImpression),window.jwplayer().on("adComplete",(t=>this.readJWPlayerImpression(t,!0))))})),e(this,"readJWPlayerImpression",((t,e)=>{window.auvars[this.auvars.p].jwp_impressions=window.auvars[this.auvars.p].jwp_impressions||[],window.auvars[this.auvars.p].jwp_impressions.push(t);const n=t.viewable,i=t.viewable,r=`jwplayer-${t.placement}`,{pageTop:s,pageBot:a,slotMiddle:o}=this.determineViewability(window.jwplayer().getContainer())||{},d=t?.ima?.ad||{},c=d?.data||d?.g||{};(c.adWrapperIds||[]).forEach(((d,u)=>{const h=d,l=c.adWrapperCreativeIds[u],p=c.mediaUrl,g={advertiser_id:"",campaign_id:"",line_item_id:h,creative_id:l,ad_slot_id:r,creative_blob:p,viewable:n,inViewPercentage:i,pageTop:s,pageBot:a,slotMiddle:o,event:"jwplayerAdImpression"};this.adSlots[r]=g,window.au.push({category:"sendEvent",events:[q(q({type:"jwp_impression"},g),{},{jwpType:t.type||""})]}),"GDFP"===c.adWrapperSystems[u]&&this.lineItemsContain(d)&&!e&&this.sendAdSlotInformation(g)}))})),e(this,"getAdSlotPayload",(t=>{if(!t)return!1;const{advertiserId:e,campaignId:n,lineItemId:i,creativeId:r}=t.getResponseInformation()||{},s=document.getElementById(t.getSlotElementId()),{pageTop:a,pageBot:o,slotMiddle:d,viewable:c,inViewPercentage:u}=this.determineViewability(s)||{};return{advertiser_id:e,campaign_id:n,line_item_id:i,creative_id:r,ad_slot_id:t.getAdUnitPath(),creative_blob:"",viewable:c,inViewPercentage:u,pageTop:a,pageBot:o,slotMiddle:d}})),e(this,"collectAndSendGoogleAdSlot",((t,e)=>{const n=this.getAdSlotPayload(t)||{};return n.event=e,this.adSlots[n.ad_slot_id]=n,this.sendAdSlotInformation(n),!0})),e(this,"determineInViewPercentage",((t,e)=>{let n=0;return t.top>=0&&t.bottom<=e&&(n=1),t.top<0&&t.bottom>0&&t.bottom<=e&&(n=t.bottom/t.height),t.top>=0&&t.top<=e&&t.bottom>e&&(n=(e-t.top)/t.height),Math.round(100*n)})),e(this,"determineViewability",(t=>{const e=window.scrollY,n=window.innerHeight,i=e+n;let r=-1,s=0,a=s>=50;if(t){const e=t.getBoundingClientRect();r=Math.round(e.top+e.height/2),s=this.determineInViewPercentage(e,n),a=s>=50}return{pageTop:e,pageBot:i,slotMiddle:r,viewable:a,inViewPercentage:s}})),e(this,"compareVisiblePercentage",((t,e,n)=>{const i=t.getAdUnitPath();this.adSlots[i]?this.adSlots[i].inViewPercentage<50&&e>=50&&this.collectAndSendGoogleAdSlot(t,n):this.collectAndSendGoogleAdSlot(t,n)})),e(this,"setGoogleEventListener",(()=>{window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("slotRenderEnded",(t=>{this.collectAndSendGoogleAdSlot(t.slot,"slotRenderEnded")}))})),window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("slotOnload",(t=>{this.collectAndSendGoogleAdSlot(t.slot,"slotOnload")}))})),window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("impressionViewable",(t=>{this.collectAndSendGoogleAdSlot(t.slot,"impressionViewable")}))})),window.googletag.cmd.push((()=>{window.googletag.pubads().addEventListener("slotVisibilityChanged",(t=>{this.compareVisiblePercentage(t.slot,t.inViewPercentage,"slotVisibilityChanged")}))}))})),e(this,"getCurrentGoogleAdSlots",(()=>{const t=window.googletag&&window.googletag.pubads&&window.googletag.pubads().getSlots();return!!t&&(t.forEach((t=>this.collectAndSendGoogleAdSlot(t,"pageLoad"))),!0)})),e(this,"sendAdSlotInformation",(t=>{if(!this.orderIds.includes(t.campaign_id)&&!this.lineItemsContain(t.line_item_id))return!1;const e=new Date,n=q(q({},t),{},{datetime:e.toISOString(),audigent_id:this.auvars.a,tagger_id:this.auvars.t,partner_id:this.auvars.p,visit_id:this.auvars.visit_id,partner_site_host:window.location.hostname,partner_site_path:window.location.pathname});window.auvars[this.auvars.p].ad_slot_events=window.auvars[this.auvars.p].ad_slot_events||[],window.auvars[this.auvars.p].ad_slot_events.push(n),this.sendAdSlotToGoogleAnalytics(n);const i=new XMLHttpRequest,r=`${m}/api/v1/otp/dfp`;return i.open("POST",r,!0),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(n)),i})),e(this,"sendAdSlotToGoogleAnalytics",(t=>{const{visit_id:e,advertiser_id:n,campaign_id:i,line_item_id:r,creative_id:s,tagger_id:a}=t,{advertiser_ids:o,campaign_ids:d,line_item_ids:c,creative_ids:u}=this.sharedToGA;return!(o.includes(n)&&d.includes(i)&&c.includes(r)&&u.includes(s)||(this.sharedToGA.advertiser_ids.push(n),this.sharedToGA.campaign_ids.push(i),this.sharedToGA.line_item_ids.push(r),this.sharedToGA.creative_ids.push(s),window.ga(`${g}.set`,"dimension10",e),window.ga(`${g}.set`,"dimension11",n),window.ga(`${g}.set`,"dimension12",i),window.ga(`${g}.set`,"dimension13",r),window.ga(`${g}.set`,"dimension14",s),"158"===this.auvars.p.toString()&&window.ga(`${g}.send`,"pageview"),window.ga(`${g}.send`,{hitType:"event",eventCategory:"smartotp",eventAction:"impression",eventLabel:a}),window.ga(`${g}.set`,"dimension11",""),window.ga(`${g}.set`,"dimension12",""),window.ga(`${g}.set`,"dimension13",""),window.ga(`${g}.set`,"dimension14",""),0))})),this.auvars=t,this.adSlots={},this.sharedToGA={advertiser_ids:[],campaign_ids:[],line_item_ids:[],creative_ids:[]},this.orderIds=n||[],this.lineItemIds=i||[],this.getCurrentGoogleAdSlots(),this.setGoogleEventListener()}};function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?k(Object(i),!0).forEach((function(n){e(t,n,i[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}n(8709),docReady((()=>window.au.push({category:"docReady"})));class G extends j{constructor(t){super(t),e(this,"checkJW",(()=>this.jwp?(window.clearInterval(this.jwpInterval),null):(window.jwplayer&&(this.jwp=!0,this.smartOtpDfp.setJWPlayerListener()),null))),e(this,"sendEcommerceEvent",(t=>{const{type:e,data:n}=t,i=new b;window.addEventListener("aupixels",(()=>{i.updatePixels()}));const r="Fandom";if(!e||!n)return!1;if("add"===e||"add_to_cart"===e){const t=$($({},n),{},{brand:n.brand||r});i.sendAddProductEventToGA(t);const e={event:"addToCart",data:t};window.au.push({category:"behavior",action:"purchase-intent"}),i.profilerServiceRequest(e)}if("transaction"===e){const t=$($({},n),{},{id:`${n.orderId}-${this.auvars.t}`,affiliation:n.brand||r});let e=t.items||[];e.length&&(e=e.map((t=>({id:t.productId||"",name:t.name||"",brand:t.brand||r,price:t.price||0,quantity:t.quantity||1})))),this.sendEvent({events:[$({type:"purchase"},n)]}),i.appendPageLoadPixelCheck("transaction"),i.sendAllProductsInTransactionToGA(e,(()=>i.sendTransactionEventToGA(t))),window.localStorage.setItem("autx",JSON.stringify([...JSON.parse(window.localStorage.getItem("autx")||"[]"),n.orderId]))}return null})),e(this,"tagsReader",(()=>{let t=[];const e=[],n=[],i=this.d.querySelectorAll("div[data-gpt-page-params]"),r={gnre:["genre",[]],tv:["tv",[]],media:["media",[]],s0:["vertical",[]],s0c:["category",[]],esrb:["esrb",[]],pform:["platform",[]],pub:["publisher",[]],theme:["content theme",[]]};e.push((((window.ads||{}).context||{}).targeting||{}).wikiCategory||null),n.push((((window.ads||{}).context||{}).targeting||{}).wikiVertical||null),i.forEach((t=>{const i=JSON.parse(t.getAttribute("data-gpt-page-params"));Object.keys(r).forEach((t=>{let s=i[t]||[];"string"==typeof s&&(s=[s]),s.forEach((e=>{r[t][1].includes(e.toLowerCase())||r[t][1].push(e.toLowerCase())})),e.push(i.s0||null),n.push(i.s0v||null)}))})),Object.values(r).forEach((e=>e[1].forEach((n=>t.push(`${e[0].toLowerCase()} > ${n.toLowerCase()}`))))),t=t.map((t=>t.toUpperCase()));const s={};if(s.primaryCategory=Array.from(new Set(e.filter((t=>t>"")))).join(),s.pageType=Array.from(new Set(n.filter((t=>t>"")))).join(),null==this.u.hostname.match(/(gamespot\.com|giantbomb\.com|metacritic\.com|tvguide\.com)$/gi))return void this.push({category:"writeDecoratorRecord",tags:t,decor_dict:s});const a=this.d.querySelector('meta[name="adtags"]');if(null==a)return void this.push({category:"writeDecoratorRecord",tags:t,decor_dict:s});const o={genre:"GENRE",gnre:"GENRE",productGenre:"GENRE",game:"GAME",franchise:"FRANCHISE",con:"PLATFORM",pform:"PLATFORM",network:"TV",tv:"TV",ptype:"PAGE TYPE"};new URLSearchParams(a.getAttribute("content")).forEach(((e,n)=>{if(e.indexOf("|")>-1)return;const i=o[n];if(i){let r=!0;"ptype"===n&&(null!=this.u.hostname.match(/gamespot\.com/gi)&&["reviews_door","entertainment_reviews_door","review"].includes(e)||null!=this.u.hostname.match(/metacritic\.com/gi)&&["critic_reviews","user_reviews"].includes(e)?e="REVIEWS":r=!1),r&&(t=[...t,...e.split(",").filter((t=>("string"==typeof t||t instanceof String)&&t.trim().length>0&&"undefined"!==t)).map((t=>`N&R > ${i} > ${t.trim()}`.toUpperCase()))])}})),this.push({category:"writeDecoratorRecord",tags:t,decor_dict:s})})),this.tagsReader(),this.docReady=this.docReady.bind(this),this.auvars.visit_id=r()(`${this.auvars.a}-${this.auvars.p}-${Date.now()}`).toString(),this.orderIds=[2900055810,2800288231,2891350216,2430343433,2877953001,2776381195,2841579083,2914646399,2811709422,2926983725,2796335699,2884513845,2829955320,2903841116,2733074813,2697661630,2792713087,2921587863,2939321473,2938145417,2947289709,2959018529,2956847257,2956205941,2958816444,2970924710,2972735884,2983676295,2994581224,2983439165,2991963287,3003612211,3028254224,3029976933,3032140244,3038913241,3034810542,2980079696,3073088604,3079108697,3089527339,3075341921,3150448250,3098451535,3113785080,3201949431,3194669712,3207760019,3214762549,3209458972,3219912403,3234412535,3253098606,3252727333,3253469729,3255205111,3263607100,3260923330,3264020863,3267059893,3268976762,3269601010,3271897640,3343579169,3353730232,3253065077],this.lineItemIds=["5837159488","5571436280","5783448216","5570139759","5783448225","5570139741","5761545988","5838772240","5785369187","5784798379","5835922698","5784798388","5837159503","5784798376","5785369859","5837159494","5839420556","5785369856","5570139747","5784798370","5785369853","5699466638","5570139750","5823087115","5838769909","5837159491","5788427160","5837159506","5835922689","5570139753","5571256462","5835922692","5784798385","5835922695","5838772237","5570139756","5823087109","5785369199","5785369193","5783448219","5823087118","5732727358","5571436277","5784798391","5779072942","5823087112","5838772246","5775108648","5823087103","5838772243","5785369184","5823087106","5732728285","5837159497","5784798373","5785369190","5785369196","5837159500","5790369275","5570139744","5784798382","5784798394","5783448222","5837159485","5837500044","5864800215","5864800221","5864800224","5866713284","5864800227","5864800230","5864800233","5864800236","5866042051","5866713287","5863568100","5863568103","5863568106","5863568109","5863568112","5863568115","5863568313","5863568316","5863568319","5864823262","5864823268","5863568097","5863568136","5863568139","5863568301","5863568304","5863568307","5863568310","5863568118","5863568121","5863568124","5863568127","5863568130","5863568133","5865821662","5893449075","5966923345","5966925760","5967431645","5967445127","5966923342","5966925265","5966925268","5966925271","5966925757","5966925763","5966925766","5966925769","5967431648","5967448694","5967448697","6308957647","6321323944","6321335251","6319186044","6319186023","6319186293","6321334972","6321335413","6321335449","6321335476","6321335680","6321930437","6321930458","6351603345","6402338322","6509316876","6511558030","6511687594","6511811675"],this.jwp=!1}docReady(){super.docReady(),this.smartOtpDfp=new R(this.auvars,this.orderIds,this.lineItemIds),window.jwplayer?(this.jwp=!0,this.smartOtpDfp.setJWPlayerListener()):this.jwpInterval=window.setInterval(this.checkJW,100)}}!function(t,e){const n="158";let i=t.au&&Array.isArray(t.au)?[...t.au]:[];t.auvars.autag_objs=[...(t.auvars.autag_objs||[]).filter((t=>"autag"!==t)),"autag"],t.au={push:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.auvars.autag_objs.forEach((e=>Object.values(t[e]||{}).forEach((t=>t.push(...n)))))},l:e=>{t.auvars.autag_objs.forEach((n=>Object.values(t[n]||{}).forEach((t=>t.GlobalListenerHandler(e)))))},init:()=>{t.auvars[n].hist=t.auvars[n].hist||[];const e=t.auvars[n].hist.slice(-1)[0];var i;t.autag=t.autag||{},t.autag[n]&&e===t.location.href||(t.auvars[n].hist.push(t.location.href),t.autag[n]=(i={auvars:t.auvars[n]},new G(i)))}},t.au.init(),i.forEach((e=>t.au.push(e)))}(window)})()})();